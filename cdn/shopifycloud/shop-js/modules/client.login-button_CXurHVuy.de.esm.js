import{M as e,S as t,L as i,a as n,A as s,D as o,b as a,P as r,c as l,_ as d,d as h,e as c,I as u,B as p,f as m,g as _,h as f,i as g,j as b,k as w,l as v,s as k,m as y,n as S,H as C,F as M,o as A,p as x,q as z,r as E,u as T,t as I,v as L,w as O,x as P,y as N,z as V,C as D,E as W,G as $,J as j,K as B,N as U,O as F,Q as q,R as H,T as R,U as K,V as G,W as Q,X as Y,Y as J,Z as X,$ as Z,a0 as ee,a1 as te,a2 as ie,a3 as ne,a4 as se,a5 as oe,a6 as ae,a7 as re,a8 as le,a9 as de,aa as he,ab as ce,ac as ue,ad as pe,ae as me,af as _e,ag as fe,ah as ge,ai as be,aj as we,ak as ve,al as ke,am as ye,an as Se,ao as Ce,ap as Me,aq as Ae,ar as xe,as as ze,at as Ee,au as Te,av as Ie,aw as Le,ax as Oe,ay as Pe,az as Ne,aA as Ve,aB as De,aC as We,aD as $e,aE as je,aF as Be,aG as Ue,aH as Fe,aI as qe,aJ as He,aK as Re,aL as Ke,aM as Ge,aN as Qe,aO as Ye,aP as Je,aQ as Xe,aR as Ze,aS as et,aT as tt,aU as it,aV as nt,aW as st,aX as ot,aY as at,aZ as rt,a_ as lt,a$ as dt,b0 as ht,b1 as ct,b2 as ut,b3 as pt,b4 as mt,b5 as _t,b6 as ft,b7 as gt,b8 as bt,b9 as wt,ba as vt,bb as kt,bc as yt,bd as St,be as Ct,bf as Mt}from"./chunk.common_Bk2zs9AZ.esm.js";class At extends e{constructor({elementName:e,analyticsTraceId:i}){super({elementName:e,analyticsTraceId:i,flow:t})}trackFollowButtonPageImpression(e){this.trackPageImpression({page:e?i.ComponentLoadedFollowing:i.ComponentLoadedNotFollowing})}trackFollowButtonInViewport(){this.trackPageImpression({page:i.FollowButtonShownInViewport})}trackFollowingGetAppButtonPageImpression(){this.trackPageImpression({page:i.FollowingGetShopAppCta})}trackFollowButtonClicked(){this.trackShopPayLoginWithShopSdkUserAction({userAction:n.FollowOnShopClicked})}trackFollowingGetAppButtonClicked(){this.trackShopPayLoginWithShopSdkUserAction({userAction:n.FollowingGetShopAppClick})}}class xt extends e{constructor({elementName:e,analyticsTraceId:t,analyticsContext:i=o.Default,flowVersion:n="unspecified",checkoutVersion:a,checkoutToken:r,shopId:l,shopPermanentDomain:d}){super({elementName:e,analyticsTraceId:t,flow:s[i],flowVersion:n,checkoutVersion:a,checkoutToken:r,shopId:l,shopPermanentDomain:d}),this._emailEnteredUserActionTracked=!1,this._passwordManagerAutofillDetected=!1}trackLoginDefaultButtonClicked(){this.trackShopPayLoginWithShopSdkUserAction({userAction:n.SignInWithShopClicked})}trackEmailEnteredAction(){this._emailEnteredUserActionTracked||(this._emailEnteredUserActionTracked=!0,this.trackShopPayLoginWithShopSdkUserAction({userAction:n.EmailEntered}))}trackPasswordManagerAutofillDetected(){this._passwordManagerAutofillDetected||(this._passwordManagerAutofillDetected=!0,this.trackShopPayLoginWithShopSdkUserAction({userAction:n.PasswordManagerAutofillDetected}))}}class zt extends xt{constructor({elementName:e,flowVersion:t,analyticsTraceId:i}){super({elementName:e,analyticsTraceId:i,analyticsContext:o.ClassicCustomerAccounts,flowVersion:t})}trackClassicCustomerAccountsLoginPageImpression(){this.trackPageImpression({page:i.ClassicCustomerAccountLogin})}trackClassicCustomerAccountsCreateAccountPageImpression(){this.trackPageImpression({page:i.ClassicCustomerAccountCreateAccount})}trackClassicCustomerAccountsAccountPageImpression(){this.trackPageImpression({page:i.ClassicCustomerAccount})}trackClassicCustomerAccountsContinueWithShopPageImpression(){this.trackPageImpression({page:i.ContinueWithShop})}trackClassicCustomerAccountsCreateAccountAction(){this.trackShopPayLoginWithShopSdkUserAction({userAction:n.CreateAccountLinkClicked})}}const Et=window.location.origin,Tt=()=>Et,It=({version:e,apiKey:t,analyticsTraceId:i,analyticsContext:n,isCompactLayout:s,isFullView:o,flow:l,flowVersion:d,signUpEnabled:h,oauthParams:c,avoidPayAltDomain:u,avoidSdkSession:p,hideCopy:m,modalCustomized:_,popupWindowParams:f,consentChallenge:g,checkoutRedirectUrl:b,checkoutVersion:w,checkoutToken:v,transactionParams:k,shopId:y,requireVerification:S,uxMode:C,error:M})=>"1"===e||"redirect"===C?function(e){return Boolean(void 0!==e&&"clientId"in e&&(null==e?void 0:e.clientId))}(c)?(({oauthParams:e,analyticsTraceId:t,analyticsContext:i,isCompactLayout:n,isFullView:s,flow:o,flowVersion:l,signUpEnabled:d,avoidPayAltDomain:h,hideCopy:c,modalCustomized:u,apiKey:p,popupWindowParams:m,consentChallenge:_,checkoutVersion:f,checkoutToken:g,transactionParams:b,shopId:w,requireVerification:v,uxMode:k,error:y})=>{const{clientId:S,redirectType:C}=e,M=e.scope||"openid email profile",A=e.responseType||"id_token",x=e.responseMode||"web_message",z=e.redirectUri||window.location.origin,{popUpName:E,popUpFeatures:T}=m||{},I="redirect"!==k&&c,L=new URLSearchParams(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({target_origin:window.location.origin,response_mode:x,response_type:A,scope:M,version:"1",client_id:S},C&&{redirect_type:C}),{redirect_uri:z,locale:"de"}),t&&{analytics_trace_id:t}),i&&{analytics_context:i}),a("compact_layout",n)),p&&{apiKey:p}),o&&{flow:o}),l&&{flow_version:l}),e.codeChallenge&&{code_challenge:e.codeChallenge}),e.codeChallengeMethod&&{code_challenge_method:e.codeChallengeMethod}),e.state&&{state:e.state}),f&&{checkout_version:f}),g&&{checkout_token:g}),b&&{transaction_params:b}),w&&{shop_id:w}),y&&{error:y}),a("full_view",s)),a("sign_up_enabled",d)),a("hide_copy",I)),a("customize-modal",u)),a("consent_challenge",_)),a("require_verification",v)),"pop_up"===C?{pop_up_name:E,pop_up_features:T}:{}));return`${r}${h?"/pay/sdk-authorize":"/pay/sdk-session"}?${L}`})({popupWindowParams:f,oauthParams:c,analyticsTraceId:i,analyticsContext:n,isCompactLayout:s,isFullView:o,flow:l,flowVersion:d,signUpEnabled:h,avoidPayAltDomain:u,hideCopy:m,modalCustomized:_,apiKey:t,consentChallenge:g,checkoutVersion:w,checkoutToken:v,transactionParams:k,shopId:y,requireVerification:S,uxMode:C,error:M}):"":(({analyticsTraceId:e,analyticsContext:t,isCompactLayout:i,isFullView:n,flow:s,flowVersion:o,signUpEnabled:r,avoidSdkSession:l,hideCopy:d,modalCustomized:h,apiKey:c,consentChallenge:u,checkoutRedirectUrl:p,checkoutVersion:m,checkoutToken:_,transactionParams:f,shopId:g,requireVerification:b,oauthParams:w,error:v})=>{const k=new URLSearchParams(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({target_origin:window.location.origin,api_key:null!=c?c:"123",locale:"de"},e&&{analytics_trace_id:e}),t&&{analytics_context:t}),a("compact_layout",i)),s&&{flow:s}),o&&{flow_version:o}),p&&{checkout_redirect_url:p}),m&&{checkout_version:m}),_&&{checkout_token:_}),f&&{transaction_params:f}),g&&{shop_id:g}),v&&{error:v}),a("full_view",n)),a("sign_up_enabled",r)),a("avoid_sdk_session",l)),a("hide_copy",d)),a("customize-modal",h)),a("consent_challenge",u)),a("require_verification",b)),(null==w?void 0:w.responseType)&&{response_type:w.responseType}),(null==w?void 0:w.redirectType)&&{redirect_type:w.redirectType}));return`${Et}/services/login_with_shop/authorize?${k}`})({analyticsTraceId:i,analyticsContext:n,isCompactLayout:s,isFullView:o,flow:l,flowVersion:d,signUpEnabled:h,avoidSdkSession:p,hideCopy:m,modalCustomized:_,apiKey:t,consentChallenge:g,checkoutRedirectUrl:b,checkoutVersion:w,checkoutToken:v,transactionParams:k,shopId:y,requireVerification:S,oauthParams:c,error:M});var Lt,Ot,Pt,Nt;class Vt extends HTMLElement{constructor(){super(),Lt.add(this),Ot.set(this,null),Pt.set(this,null),customElements.get("shop-logo")||customElements.define("shop-logo",l)}connectedCallback(){return d(this,void 0,void 0,(function*(){if(yield h(this,Lt,"m",Nt).call(this),this.shadowRoot)return;const e=document.createElement("template");if(e.innerHTML=`\n    <style>\n      :host {\n        display: inline-block;\n        line-height: normal;\n      }\n\n      /* TODO: Centralize styling of shop branded buttons: https://github.com/Shopify/shop-identity/issues/1252 */\n      .button {\n        border: none;\n        margin: 0;\n        padding: 0;\n        width: auto;\n        overflow: visible;\n\n        background: #5433EB;\n        border-radius: var(--buttons-radius, 4px);\n        color: #ffffff;\n        font: 16px/19px -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica;\n\n        line-height: normal;\n\n        -webkit-font-smoothing: inherit;\n        -moz-osx-font-smoothing: inherit;\n\n        -webkit-appearance: none;\n        position: relative;\n        display: flex;\n        align-items: center;\n\n        transition: background-color 100ms ease-in-out, opacity 100ms ease-out, color 100ms ease-in-out;\n      }\n\n      .button:hover {\n        background: #7f68e9;\n      }\n\n      .login-text {\n        white-space: nowrap;\n        padding: 14px 45px;\n        cursor: pointer;\n      }\n\n      .login-text shop-logo {\n        position: relative;\n        top: 3px;\n      }\n    </style>\n    <button class="button">\n      <span class="login-text">\n        <slot name="login-text">\n          Login with ${Dt("white")}\n        </slot>\n      </span>\n    </button>\n  `,c(this,Ot,this.attachShadow({mode:"open"}),"f"),h(this,Ot,"f").appendChild(e.content.cloneNode(!0)),h(this,Pt,"f")){const e=h(this,Pt,"f").translate("login_with_shop.login",{shop:Dt("white")});h(this,Ot,"f").querySelector('slot[name="login-text"]').innerHTML=e}}))}setFocused(){var e,t;null===(t=null===(e=h(this,Ot,"f"))||void 0===e?void 0:e.querySelector("button"))||void 0===t||t.focus()}}function Dt(e){return`<shop-logo role="img" color=${e} size="15" style="display: inline-flex;"></shop-logo>`}Ot=new WeakMap,Pt=new WeakMap,Lt=new WeakSet,Nt=function(){return d(this,void 0,void 0,(function*(){try{const e="de",t={follow_on_shop:{follow:"In {shop} folgen",following:"In {shop} gefolgt",auth_modal:{title:"In Shop folgen",description:"Bleibe auf dem neuesten Stand und verpasse niemals einen Sale, einen Restock oder ein Bestellupdate."},following_modal:{title:"{store} in Shop besuchen",subtitle:"Alles, was du zum Einkaufen, Verfolgen und Bezahlen brauchst – an einem zentralen Ort.",qr_header:"Scannen, um {store} in der Shop-App aufzurufen",qr_alt_text:"QR-Code für Shop-App",continue:"Fortfahren"},completed:{title:"Du folgst {store}",subtitle:"Wir haben eine E-Mail mit einem Link zum Herunterladen der Shop-App an dich gesendet."},personalization_consent:{title:"Synchronisiere deine Einkaufsaktivität, um auf Shop zu folgen"}},login_with_shop:{login:"Anmelden bei {shop}",auth_modal:{login_title:"Bei Shop anmelden",login_description:"Der einfachste und sicherste Weg, sich bei {store} anzumelden – ohne Passwort.",signup_title:"Konto erstellen",signup_description:"Gib deine Telefonnummer ein, um ein Shop-Konto zu erstellen.",login_sms_title:"Deine Identität bestätigen",login_sms_description:"Gib den Code ein, der an {phoneNumber} gesendet wurde",login_email_title:"Bestätige deine Identität",login_email_description:"Gib den Code ein, der an deine E-Mail ({email}) gesendet wurde",login_title_with_store:"Melde dich mit Shop bei {store} an",login_webauthn_title:"Bestätige deine Identität",login_webauthn_description:"Melde dich mit einem Passkey an, um deine gespeicherten Informationen sicher zu nutzen.",login_webauthn_footer:"Wenn du fortfährst, wird dein Name und deine E-Mail-Adresse mit {store} geteilt."}},customer_accounts:{remember_me:"Meine Informationen sicher bei Shop abspeichern, um überall ein schnelleres Anmelden zu ermöglichen",sign_up_page:{auth_modal:{login_title:"Mit Shop fortfahren",login_description:"Nutze dein Shop-Konto, um dich überall anzumelden – ohne Passwort.",login_sms_description:"Nutze dein Shop-Konto, um dich überall anzumelden – ohne Passwort.\r\n\r\nBestätige deine Identität, indem du den Code eingibst, der an {phoneNumber} gesendet wurde",login_email_description:"Nutze dein Shop-Konto, um dich überall anzumelden – ohne Passwort.\r\n\r\nBestätige deine Identität, indem du den Code eingibst, der an deine E-Mail-Adresse {email} gesendet wurde",login_webauthn_title:"Mit Shop fortfahren",login_webauthn_description:"Melde dich mit einem Passkey an, um deine gespeicherten Informationen sicher zu nutzen."}}},verified_email_auth:{auth_modal:{login_title:"Einloggen oder registrieren",signup_title:"Mit Shop fortfahren",signup_description:"Erstelle ein Shop-Konto, um dich bei {clientName} anzumelden – kein Passwort erforderlich"}},legal:{terms_of_service:"allgemeinen Geschäftsbedingungen",privacy_policy:"Datenschutzerklärung",terms:"allgemeinen",client:"Siehe {termsOfService} und {privacyPolicy} von {clientName}.",shop:"Indem du fortfährst, stimmst du den {termsOfService} von Shop zu und nimmst die {privacyPolicy} zur Kenntnis.",authorized_scopes:{email_name:"Wenn du fortfährst, wird dein Name und deine E-Mail-Adresse mit {store} geteilt."}},payment_request:{auth_modal:{login_title:"Checke mit Shop Pay aus",login_description:"Nutze deine gespeicherten Informationen, um sicher in {store} auszuchecken.",login_sms_title:"Deine Identität bestätigen",login_sms_description:"Gib den Code ein, der an {phoneNumber} gesendet wurde, um in aller Sicherheit deine gespeicherten Informationen zu verwenden.",login_email_title:"Bestätige deine Identität",login_email_description:"Gib den Code ein, der an deine E-Mail-Adresse {email} gesendet wurde, um in aller Sicherheit deine gespeicherten Informationen zu verwenden."}},checkout_modal:{auth_modal:{login_sms_description:"Gib den Code ein, der an {phoneNumber} gesendet wurde, um in aller Sicherheit deine gespeicherten Informationen zu verwenden.",login_email_description:"Gib den Code ein, der an deine E-Mail-Adresse {email} gesendet wurde, um in aller Sicherheit deine gespeicherten Informationen zu verwenden."}}};c(this,Pt,new u({[e]:t}),"f")}catch(e){e instanceof Error&&p.notify(e)}return null}))},customElements.get("login-with-shop-button")||customElements.define("login-with-shop-button",Vt);function Wt(e){if(!g.isSupported)throw new Error("Sanitization of custom modal text is not supported in this browser.");return g.sanitize(e,{ALLOWED_TAGS:[]})}const $t={step:b.Start,configurable:!1,headerVisible:!1,headerDividerVisible:!1,headerTemplate:"",descriptionTemplate:"",userNameKnown:!1,sessionDetected:!1,templateVariables:{clientName:"the store",store:"the store"}};function jt(e,t){switch(e.type){case w.Init:return e.payload.personalizeConsentChallenge?Object.assign(Object.assign({},t),{step:b.PersonalizeConsent,headerVisible:!0,headerDividerVisible:!1,userNameKnown:e.payload.userNameKnown||!1,templateVariables:Object.assign(Object.assign(Object.assign({},t.templateVariables),e.payload),{store:e.payload.clientName}),headerTemplate:"login_with_shop.auth_modal.login_title_with_store",descriptionTemplate:"",sessionDetected:e.payload.userFound}):Object.assign(Object.assign({},t),{configurable:!0,headerVisible:!0,headerDividerVisible:e.payload.userFound,step:e.payload.userFound?b.OneClick:b.Start,userNameKnown:e.payload.userNameKnown||!1,templateVariables:Object.assign(Object.assign(Object.assign({},t.templateVariables),e.payload),{store:e.payload.clientName}),headerTemplate:"login_with_shop.auth_modal.login_title",descriptionTemplate:"login_with_shop.auth_modal.login_description",sessionDetected:e.payload.userFound});case w.PopUpOpened:return Object.assign(Object.assign({},t),{step:b.PopUpOpened});case w.Restart:return Object.assign(Object.assign({},t),{configurable:!0,headerDividerVisible:!1,step:b.Start,userNameKnown:!1,headerTemplate:"login_with_shop.auth_modal.login_title",descriptionTemplate:"login_with_shop.auth_modal.login_description",sessionDetected:!1,templateVariables:Object.assign(Object.assign({},t.templateVariables),{email:"",phoneNumber:"",userFound:!1,userNameKnown:!1})});case w.UserMatched:return e.payload.personalizeConsentChallenge?Object.assign(Object.assign({},t),{step:b.PersonalizeConsent,userNameKnown:e.payload.hasName||!1,headerVisible:!0,headerDividerVisible:!1,headerTemplate:"login_with_shop.auth_modal.login_title_with_store",descriptionTemplate:"",sessionDetected:e.payload.userCookieExists}):e.payload.userCookieExists?Object.assign(Object.assign({},t),{configurable:!0,headerDividerVisible:!0,step:b.OneClick,userNameKnown:e.payload.hasName||!1,sessionDetected:!0}):Object.assign(Object.assign({},t),{userNameKnown:e.payload.hasName||!1,sessionDetected:!1});case w.UserNotMatched:return Object.assign(Object.assign({},t),{step:b.SignUp,headerDividerVisible:!0,userNameKnown:!1,configurable:!1,headerTemplate:"login_with_shop.auth_modal.signup_title",descriptionTemplate:"login_with_shop.auth_modal.signup_description",sessionDetected:!1});case w.VerificationStepChanged:{const{step:i,phone:n="",email:s=""}=e.payload;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),{step:Bt(i),configurable:!1,headerDividerVisible:!0,templateVariables:Object.assign(Object.assign({},t.templateVariables),{phoneNumber:n.replaceAll(" "," "),email:s}),legalTextVariant:"authorize"}),"email"===i&&{headerTemplate:"login_with_shop.auth_modal.login_email_title",descriptionTemplate:"login_with_shop.auth_modal.login_email_description"}),"sms"===i&&{headerTemplate:"login_with_shop.auth_modal.login_sms_title",descriptionTemplate:"login_with_shop.auth_modal.login_sms_description"}),"one_click"===i&&{headerTemplate:"login_with_shop.auth_modal.login_title",descriptionTemplate:"login_with_shop.auth_modal.login_description"}),"webauthn"===i&&{headerTemplate:"login_with_shop.auth_modal.login_webauthn_title",descriptionTemplate:"login_with_shop.auth_modal.login_webauthn_description",legalTextVariant:"generic",legalTextTemplate:"login_with_shop.auth_modal.login_webauthn_footer",headerDividerVisible:!1})}}return t}function Bt(e){switch(e){case"one_click":return b.OneClick;case"email":return b.EmailVerification;case"webauthn":return b.WebAuthnVerification;default:return b.PhoneVerification}}class Ut{get _sheetModal(){return this._sheetModalManager.sheetModal}constructor(e,t){this._isCompact=!1,this._isHeaderless=!1,this._analyticsContext=o.Default,this._flowVersion="unspecified",this._authenticationLevel=v.Phone,this._state=$t,this._rootElement=e,this._sheetModalManager=k().build(),({onOpen:this._onOpen,onClose:this._onClose}=t)}setCompact(e){this._isCompact=e}setHeaderless(e){this._isHeaderless=e}init(){var e,t,i,n;const s=this.getModalAttributes();y(S(s),"shop-login-default-landing",this._sheetModalManager.shadowRoot),this._modalHeader=this._sheetModalManager.shadowRoot.querySelector(`.${C}`),this._footerElement=this._sheetModalManager.shadowRoot.querySelector(`.${M}`),this._footerContent=this._sheetModalManager.shadowRoot.querySelector(`.${A}`),this._iframe=this._sheetModalManager.shadowRoot.querySelector(`.${x}`),this._sheetModal.addEventListener("modalcloserequest",(e=>d(this,void 0,void 0,(function*(){yield this.closeAuthorizeModal(e.detail)})))),this._isCompact&&(this._sheetModal.setAttribute(z,""),this._sheetModal.setMonorailTracker(this._monorailTracker),this._iframe.classList.add(E),null===(t=null===(e=this._modalHeader)||void 0===e?void 0:e.parentNode)||void 0===t||t.removeChild(this._modalHeader),null===(n=null===(i=this._footerElement)||void 0===i?void 0:i.parentNode)||void 0===n||n.removeChild(this._footerElement)),T(this._iframe,"allow","publickey-credentials-get *")}setModalAnalyticsTraceId(e){this._sheetModal.setAttribute(I,e)}setModalPositionVariant(e){this._sheetModal.setAttribute(L,e)}showModal(){return d(this,void 0,void 0,(function*(){(yield this._sheetModal.open())&&this._onOpen(),this.refreshHeaderIframeHeight()}))}openAuthorizeModal(){return d(this,void 0,void 0,(function*(){var e;yield this.showModal(),yield null===(e=this._monorailTracker)||void 0===e?void 0:e.trackPageImpression({page:i.AuthorizeModal})}))}closeAuthorizeModal(e){return d(this,void 0,void 0,(function*(){var t;if(this._sheetModal){(yield this._sheetModal.close())&&this._onClose(e)}null===(t=this._continueButton)||void 0===t||t.setFocused()}))}destroy(){this._sheetModalManager.destroy()}setContinueButtonVisible(e){var t,n,s;if(!e)return null===(t=this._continueButton)||void 0===t||t.remove(),void(this._continueButton=void 0);this._continueButton||(this._continueButton=document.createElement("login-with-shop-button"),null===(n=this._continueButton)||void 0===n||n.addEventListener("click",(()=>{var e;null===(e=this._monorailTracker)||void 0===e||e.trackLoginDefaultButtonClicked(),"redirect"===this._uxMode&&this._authorizeUrl?window.location.href=this._authorizeUrl:this.openAuthorizeModal()})),null===(s=this._monorailTracker)||void 0===s||s.trackPageImpression({page:i.SignInWithShopButton}),this._rootElement.appendChild(this._continueButton))}setMonorailTracker(e){var t,i;this._monorailTracker=e,null===(i=(t=this._sheetModal).setMonorailTracker)||void 0===i||i.call(t,e)}setAnalyticsContext(e){this._analyticsContext=e}setFlowVersion(e){this._flowVersion=e}getUxMode(){return this._uxMode}setUxMode(e){e&&(this._uxMode=e)}setAuthorizeUrl(e){this._authorizeUrl=e}setAuthenticationLevel(e){this._authenticationLevel=e}onContentLoaded(){this._sheetModal.onContentLoaded()}setFlow(e){this._flow=e,this._sheetModalManager.setNametagSuffix(e)}getIframe(){return this._iframe}setAnchorSelector(e){this._sheetModal.setAttribute(O,e)}setBrand(e){e&&this._sheetModal.setAttribute("modal-brand",e)}resizeIframe(e,t){this._iframe&&(this._iframe.style.height=`${e}px`,this._iframe.style.width=`${P(t,this._iframe)}px`)}render(){const{configurable:e,headerVisible:t,headerDividerVisible:i}=this._state;this.setHeaderVisible(t),this.setHeaderDividerVisible(i),e&&this._modalLogoSrc&&this.updateHeaderLogo(this._modalLogoSrc),this.renderHeaderTemplate(),this.renderHeaderDescriptionTemplate(),this.renderFooterContent(),this.refreshHeaderIframeHeight()}dispatch(e){switch(this._analyticsContext){case o.CheckoutExtension:case o.Default:this._state=this._authenticationLevel===v.Phone?jt(e,this._state):function(e,t){const i=jt(e,t);switch(i.step){case b.Start:return Object.assign(Object.assign({},i),{headerTemplate:"verified_email_auth.auth_modal.login_title",descriptionTemplate:""});case b.SignUp:return Object.assign(Object.assign({},i),{headerTemplate:"verified_email_auth.auth_modal.signup_title",descriptionTemplate:"verified_email_auth.auth_modal.signup_description"});case b.PhoneVerification:return Object.assign(Object.assign({},i),{headerTemplate:"login_with_shop.auth_modal.login_sms_title",descriptionTemplate:"login_with_shop.auth_modal.login_sms_description"});case b.EmailVerification:return Object.assign(Object.assign({},i),{headerTemplate:"login_with_shop.auth_modal.login_email_title",descriptionTemplate:"login_with_shop.auth_modal.login_email_description"})}return i}(e,this._state);break;case o.ClassicCustomerAccounts:this._state="sign_up"===this._flowVersion?function(e,t){const i=jt(e,t);switch(i.step){case b.Start:case b.OneClick:return Object.assign(Object.assign({},i),{headerTemplate:"customer_accounts.sign_up_page.auth_modal.login_title",descriptionTemplate:"customer_accounts.sign_up_page.auth_modal.login_description"});case b.PhoneVerification:return Object.assign(Object.assign({},i),{headerTemplate:"customer_accounts.sign_up_page.auth_modal.login_title",descriptionTemplate:"customer_accounts.sign_up_page.auth_modal.login_sms_description"});case b.EmailVerification:return Object.assign(Object.assign({},i),{headerTemplate:"customer_accounts.sign_up_page.auth_modal.login_title",descriptionTemplate:"customer_accounts.sign_up_page.auth_modal.login_email_description"});case b.WebAuthnVerification:return Object.assign(Object.assign({},i),{headerTemplate:"customer_accounts.sign_up_page.auth_modal.login_title",descriptionTemplate:"login_with_shop.auth_modal.login_webauthn_description"})}return i}(e,this._state):jt(e,this._state);break;case o.CheckoutModal:this._state=function(e,t){const i=jt(e,t);switch(i.step){case b.PhoneVerification:return Object.assign(Object.assign({},i),{descriptionTemplate:"checkout_modal.auth_modal.login_sms_description"});case b.EmailVerification:return Object.assign(Object.assign({},i),{descriptionTemplate:"checkout_modal.auth_modal.login_email_description"})}return i}(e,this._state);break;case o.PaymentRequest:this._state=function(e,t){const i=jt(e,t);switch(i.step){case b.PopUpOpened:case b.OneClick:return Object.assign(Object.assign({},i),{headerTemplate:"payment_request.auth_modal.login_title",descriptionTemplate:"payment_request.auth_modal.login_description"});case b.PhoneVerification:return Object.assign(Object.assign({},i),{headerTemplate:"payment_request.auth_modal.login_sms_title",descriptionTemplate:"payment_request.auth_modal.login_sms_description"});case b.EmailVerification:return Object.assign(Object.assign({},i),{headerTemplate:"payment_request.auth_modal.login_email_title",descriptionTemplate:"payment_request.auth_modal.login_email_description"})}return i}(e,this._state);break;default:this._state=$t}this._isCompact||this.render()}updateHeaderLogo(e){var t,i;if(!this._headerLogo){this._headerLogo=document.createElement("img");const e=null===(t=this._headerContentsContainer)||void 0===t?void 0:t.firstChild;e&&(null===(i=this._headerContentsContainer)||void 0===i||i.insertBefore(this._headerLogo,e))}this._headerLogo.src=e,this._headerLogo.style.maxHeight="64px",this._headerLogo.style.width="auto"}renderHeaderTemplate(){var e;const{configurable:t,headerTemplate:i,templateVariables:n}=this._state;let s="";if(t&&this._modalTitle)try{s=this._modalTitle.replace(/\${storeName}/gi,n.clientName)}catch(e){if(e instanceof Error&&e.message.includes("replaceAll is not a function"))return void p.notify(new Error("modalTitle is not a string. Expected string, received "+typeof this._modalTitle));throw e}else i&&(s=(null===(e=this._i18n)||void 0===e?void 0:e.translate(i,n))||"");"string"==typeof s&&(this._headerTitle.textContent=s)}renderHeaderDescriptionTemplate(){var e,t;const{configurable:i,descriptionTemplate:n,templateVariables:s}=this._state;let o="";i&&this._modalDescription?o=null===(e=this._modalDescription)||void 0===e?void 0:e.replace(/\${storeName}/gi,s.clientName):n&&(o=(null===(t=this._i18n)||void 0===t?void 0:t.translate(n,s))||""),"string"==typeof o&&(this._headerDescription.textContent=o)}renderFooterContent(){if(!this._i18n)return;const{step:e,templateVariables:t,sessionDetected:i}=this._state,{clientName:n,privacyPolicyUrl:s,termsOfServiceUrl:a}=t;let r="";switch(e){case b.PersonalizeConsent:case b.EmailVerification:case b.PhoneVerification:case b.WebAuthnVerification:case b.OneClick:{if(e===b.PersonalizeConsent&&!i)break;if(this._analyticsContext===o.PaymentRequest)break;const l=this._i18n.translate("legal.authorized_scopes.email_name",t);if(!s||!a){r=l;break}r=`${l} ${this._i18n.translate("legal.client",{clientName:n,privacyPolicy:`<a href="${s}" target="_blank">${this._i18n.translate("legal.privacy_policy")}</a>`,termsOfService:`<a href="${a}" target="_blank">${this._i18n.translate("legal.terms")}</a>`})}`;break}case b.SignUp:{const e=`<a href="https://shop.app/terms-of-service" target="_blank">${this._i18n.translate("legal.terms_of_service")}</a>`,t=`<a href="https://www.shopify.com/legal/privacy/app-users" target="_blank">${this._i18n.translate("legal.privacy_policy")}</a>`;r=this._i18n.translate("legal.shop",{clientName:n,termsOfService:e,privacyPolicy:t});break}}this._footerContent.innerHTML=r,this.setFooterVisible(Boolean(r))}setHeaderVisible(e){var t;if(this._modalHeader.classList.toggle(N,!e),!this._headerIframe){this._headerIframe=this._sheetModalManager.shadowRoot.querySelector(`.${C}-container`);const e=null===(t=this._headerIframe.contentDocument)||void 0===t?void 0:t.querySelector("body");e.innerHTML=V,this._headerContentsContainer=document.createElement("div"),this._headerContentsContainer.classList.add(D),this._headerTitle=document.createElement("h2"),this._headerTitle.classList.add(W),this._headerDescription=document.createElement("div"),this._headerDescription.classList.add($),this._headerContentsContainer.appendChild(this._headerTitle),this._headerContentsContainer.appendChild(this._headerDescription),"pop_up"===this._flow&&(this._headerContentsContainer.style.display="flex",this._headerContentsContainer.style.flexDirection="column"),e.appendChild(this._headerContentsContainer),window.ResizeObserver?(this._headerResizeObserver=new ResizeObserver((()=>{this.refreshHeaderIframeHeight()})),this._headerResizeObserver.observe(this._headerContentsContainer)):this.refreshHeaderIframeHeight()}}refreshHeaderIframeHeight(){var e,t,i,n;const s=null===(t=null===(e=this._headerIframe)||void 0===e?void 0:e.contentDocument)||void 0===t?void 0:t.querySelector("body"),o=`${null===(i=this._headerContentsContainer)||void 0===i?void 0:i.getBoundingClientRect().height}px`;null==s||s.setAttribute("height",o),null===(n=this._headerIframe)||void 0===n||n.setAttribute("height",o)}setHeaderDividerVisible(e){this._modalHeader.classList.toggle(j,e)}setFooterVisible(e){this._footerElement.classList.toggle(N,!e)}setCloseButtonVisible(e){this._sheetModal.setCloseButtonVisibility(e)}setCustomizedModalContent({modalTitle:e,modalDescription:t,modalLogo:i}){e&&(this._modalTitle=Wt(e)),t&&(this._modalDescription=Wt(t)),i&&(this._modalLogoSrc=Wt(i))}getCustomizedModalContent(){return{modalTitle:this._modalTitle,modalDescription:this._modalDescription,modalLogo:this._modalLogoSrc}}setTranslations(e){this._i18n=e}isModalCustomized(){return Boolean(this._modalTitle||this._modalDescription||this._modalLogoSrc)}getModalAttributes(){var e,t;const i=null!==(t=null===(e=this._sheetModal)||void 0===e?void 0:e.getAttributeNames())&&void 0!==t?t:[];return B(this._isCompact,z,i),B(this._isHeaderless,U,i),i.map((e=>{var t;const i=null===(t=this._sheetModal)||void 0===t?void 0:t.getAttribute(e);return i?`${e}="${i}"`:e})).join(" ")}}const Ft=[o.Default,o.CheckoutExtension,o.CheckoutModal,o.ClassicCustomerAccounts,o.PaymentRequest];var qt,Ht,Rt,Kt,Gt,Qt,Yt,Jt,Xt,Zt,ei,ti,ii,ni,si,oi,ai,ri,li,di;const hi=[F.CaptchaChallenge];class ci extends H{static get observedAttributes(){return[O,R,K,G,Q,Y,J,X,Z,ee,te,I,ie,ne,se,oe,ae,re,le,de,he,ce,ue,pe,m,_,f,me,_e,fe,ge,be,we,ve,ke,ye,Se,Ce,Me,Ae,xe,ze]}constructor(){super(),qt.add(this),Ht.set(this,Ee()),Rt.set(this,""),Kt.set(this,"2"),Gt.set(this,window.location.origin),Qt.set(this,new xt({elementName:"shop-login-default",analyticsTraceId:h(this,Ht,"f")})),Yt.set(this,void 0),Jt.set(this,void 0),Xt.set(this,void 0),Zt.set(this,void 0),ei.set(this,void 0),ti.set(this,null),this._disableSignUp=!1,this._autoOpen=!1,this._autoOpened=!1,this._analyticsContext=o.Default,this._avoidPayAltDomain=!1,this._avoidSdkSession=!1,this._flow=Te.Default,this._flowVersion="unspecified",this._error="",this._hideButton=!1,this._anchorSelector="",this._isCompactLayout=!1,this._hidePayCopy=!1,this._email="",this._authorizeModalOpened=!1,this._keepModalOpen=!1,this._requireVerification=!1,this._shouldListenToResizeMessage=!0,ii.set(this,(()=>{this._updateSrc(!0)})),ni.set(this,(()=>{var e;this.dispatchCustomEvent("modalclosed"),null===(e=this._iframeMessenger)||void 0===e||e.postMessage({type:"sheetmodalclosed"}),Ie()})),si.set(this,(()=>{var e;this.dispatchCustomEvent("modalopened"),null===(e=this._iframeMessenger)||void 0===e||e.postMessage({type:"sheetmodalopened"})})),oi.set(this,(e=>{var t,i;const n=Le(this._analyticsContext);var s;return this._hidePayCopy=!n&&(s=this._analyticsContext,Ft.includes(s)),!(!e&&this._isCompactLayout===n)&&(this._isCompactLayout=n,null===(t=this._view)||void 0===t||t.setCompact(this._isCompactLayout),null===(i=this._view)||void 0===i||i.init(),!0)})),this._rootElement=this.attachShadow({mode:"open"}),this._analyticsContext=this.getAttribute(te)||o.Default,this._view=new Ut(this._rootElement,{onOpen:h(this,si,"f"),onClose:h(this,ni,"f")}),h(this,oi,"f").call(this,!0),this._debouncedUpdateUserInfo=Oe((({email:e,firstName:t,lastName:i})=>{var n;(null===(n=this._passwordManagerDetection)||void 0===n?void 0:n.isFilledWithPasswordManager())&&h(this,Qt,"f").trackPasswordManagerAutofillDetected(),this._updateUserInfo({email:e,firstName:t,lastName:i}),qe(e)&&h(this,Qt,"f").trackEmailEnteredAction()}),et),this._payLoadedResolve=()=>{},this._payLoaded=new Promise((e=>{this._payLoadedResolve=e}))}attributeChangedCallback(e,t,i){var n,s,a,r,l,d,u,p,g,b,w;const v=Boolean(null!==i);switch(e){case K:c(this,Kt,i,"f"),this._updateSrc();break;case R:c(this,Rt,i||"","f"),this._updateSrc();break;case ne:this._responseType=i||"",this._updateSrc();break;case se:this._responseMode=i||"",this._updateSrc();break;case oe:this._codeChallenge=i||"",this._updateSrc();break;case ae:this._codeChallengeMethod=i||"",this._updateSrc();break;case re:this._state=i||"",this._updateSrc();break;case le:this._scope=i||"",this._updateSrc();break;case G:c(this,Gt,i||window.location.origin,"f"),Ne(h(this,Gt,"f"));break;case Q:this._hideButton=v,null===(n=this._view)||void 0===n||n.setContinueButtonVisible(v),this._updateSrc();break;case de:this._avoidPayAltDomain=v,this._updateSrc();break;case he:this._avoidSdkSession=v,this._updateSrc();break;case ce:this._flow=i||Te.Default,null===(s=this._view)||void 0===s||s.setFlow(this._flow),this._updateSrc();break;case ue:this._flowVersion=i||"unspecified",null===(a=this._view)||void 0===a||a.setFlowVersion(this._flowVersion),this._updateMonorailTracker(),this._updateSrc();break;case Y:this._disableSignUp=v,this._updateSrc();break;case J:this._autoOpen=v;break;case X:c(this,Yt,"pop_up"===i||"iframe"===i?i:"top_frame","f"),this._updateSrc();break;case Z:c(this,Jt,i||void 0,"f"),this._updateSrc();break;case ee:c(this,Xt,i||void 0,"f"),null===(r=this._view)||void 0===r||r.setUxMode(h(this,Xt,"f")),this._updateSrc();break;case te:this._analyticsContext=i||o.Default,null===(l=this._view)||void 0===l||l.setAnalyticsContext(this._analyticsContext),h(this,oi,"f").call(this),this._updateMonorailTracker(),this._updateSrc();break;case I:c(this,Ht,i||Ee(),"f"),this._updateMonorailTracker(),this._updateSrc();break;case ie:null===(d=this._view)||void 0===d||d.setModalPositionVariant(i||Pe.Default);break;case pe:this._initEmail(i||"");break;case O:this._anchorSelector=i||"",null===(u=this._view)||void 0===u||u.setAnchorSelector(i||"");break;case m:null===(p=this._view)||void 0===p||p.setCustomizedModalContent({modalTitle:i||void 0}),this._updateSrc();break;case _:null===(g=this._view)||void 0===g||g.setCustomizedModalContent({modalDescription:i||void 0}),this._updateSrc();break;case f:null===(b=this._view)||void 0===b||b.setCustomizedModalContent({modalLogo:i||void 0}),this._updateSrc();break;case me:this._apiKey=i||void 0,this._updateSrc();break;case _e:c(this,Zt,i||void 0,"f"),this._updateSrc();break;case fe:c(this,ei,i||void 0,"f"),this._updateSrc();break;case ge:null===(w=this._view)||void 0===w||w.setBrand(i||void 0);break;case be:this._consentChallenge=v,this._updateSrc();break;case we:this._checkoutRedirectUrl=i||void 0,this._updateSrc();break;case ve:this._checkoutVersion=i||void 0,this._updateSrc(),this._updateMonorailTracker();break;case ke:this._checkoutToken=i||void 0,this._updateSrc(),this._updateMonorailTracker();break;case ye:this._transactionParams=i||void 0,this._updateSrc();break;case Se:this._shopId=i||void 0,this._updateSrc(),this._updateMonorailTracker();break;case Ce:this._shopPermanentDomain=i||void 0,this._updateMonorailTracker();break;case Me:this._firstName=i||void 0;break;case Ae:this._lastName=i||void 0;break;case xe:this._requireVerification=v,this._updateSrc();break;case ze:this._source=i||"unspecified"}}connectedCallback(){return d(this,void 0,void 0,(function*(){this.subscribeToHub(Ve.UserStatusIdentity,h(this,ii,"f")),this._keepModalOpen=this.getBooleanAttribute(De),this._hideButton=this.getBooleanAttribute(Q),this._apiKey=this.getAttribute(me)||void 0,this._source=this.getAttribute(ze)||"unspecified";try{!function({modalTitle:e,modalDescription:t,modalLogo:i},n){if(Boolean(e||t||i)&&!n)throw new Error("An API key must be provided if the modal content is customized");if(e&&e.length>150)throw new Error(`${m} cannot exceed 150 characters.`);if(t&&t.length>300)throw new Error(`${_} cannot exceed 300 characters.`);if(i)try{new URL(i)}catch(e){throw new Error(`${f} must be a valid URL`)}}(this._view.getCustomizedModalContent(),this._apiKey),yield h(this,qt,"m",ai).call(this),yield this._initElements(),Ne(h(this,Gt,"f")),h(this,Qt,"f").trackFeatureInitialization({apiKey:this._apiKey,source:this._source})}catch(e){e instanceof Error&&(We(`Invalid config. ${e.message}`),this._handleError("invalid_config",F.ApiUnavailable))}}))}_initElements(){return d(this,void 0,void 0,(function*(){var e,t;if(!this._view)return;this._view.setModalAnalyticsTraceId(h(this,Ht,"f")),this._view.setMonorailTracker(h(this,Qt,"f")),this._view.setAnchorSelector(this._anchorSelector),this._view.setContinueButtonVisible(!this._hideButton),this._iframe=this._view.getIframe(),this._updateSrc();const i=(null===(e=this.ownerDocument)||void 0===e?void 0:e.defaultView)||void 0;this._iframeListener=new $e(new je(this._iframe),[r,Be,h(this,Gt,"f")],h(this,qt,"m",di).bind(this),i),this._iframeMessenger=new Ue(this._iframe);const{userFound:n}=yield this._iframeListener.waitForMessage("loaded");this._payLoadedResolve({userFound:n}),this.dispatchCustomEvent("iframeloaded"),h(this,Qt,"f").trackShopPayModalStateChange({currentState:Fe.Loaded}),h(this,qt,"m",li).call(this),n&&this._autoOpen&&!this._autoOpened&&(null===(t=this._updateEmailAbortController)||void 0===t||t.abort(),this._autoOpened=!0,yield this._view.openAuthorizeModal())}))}_initEmail(e){this._email=e,qe(this._email)?this._debouncedUpdateUserInfo({email:this._email,firstName:this._firstName,lastName:this._lastName}):this._debouncedUpdateUserInfo({email:""})}disconnectedCallback(){var e,t;this.unsubscribeAllFromHub(),null===(e=this._iframeListener)||void 0===e||e.destroy(),null===(t=this._view)||void 0===t||t.destroy(),this.stopListeningToInput()}setShouldListenToResizeMessage(e){this._shouldListenToResizeMessage=e}requestShow(e){return d(this,void 0,void 0,(function*(){var t;yield this._payLoaded,this._authorizeModalOpened?p.notify(new Error("requestShow called when the modal is not closed")):(e&&this._updateUserInfo({email:e,firstName:this._firstName,lastName:this._lastName}),yield this._payLoaded,yield null===(t=this._view)||void 0===t?void 0:t.openAuthorizeModal())}))}setPasswordManagerDetection(e){this._passwordManagerDetection=e}listenToInput(e){this.stopListeningToInput();const t=Oe((e=>{qe(e)?(this._updateUserInfo({email:e}),h(this,Qt,"f").trackEmailEnteredAction()):this._updateUserInfo({email:""})}),et);t(e.value),this._inputListener=new He(e,t)}getIframe(){var e;return null===(e=this._view)||void 0===e?void 0:e.getIframe()}ensureIframeIsLoaded(){return this._payLoaded.then((()=>{}))}stopListeningToInput(){var e;null===(e=this._inputListener)||void 0===e||e.destroy()}_updateUserInfo(e){return d(this,arguments,void 0,(function*({email:e,firstName:t="",lastName:i=""}){var n,s;if(!this._authorizeModalOpened){this._updateEmailAbortController&&!(null===(n=this._updateEmailAbortController)||void 0===n?void 0:n.signal.aborted)&&this._updateEmailAbortController.abort(),this._updateEmailAbortController=new AbortController;try{const{userFound:n}=yield this._payLoaded;if(n&&this._autoOpen&&!this._autoOpened)return;this._iframeMessenger.postMessage({type:"namesubmitted",firstName:t,lastName:i}),this._iframeMessenger.postMessage({type:"emailsubmitted",email:e,hideChange:e.length>0});const o=this._iframeListener.waitForMessage("shop_user_matched",this._updateEmailAbortController.signal),a=new Promise(((e,t)=>{const i=()=>d(this,void 0,void 0,(function*(){try{const{code:t}=yield this._iframeListener.waitForMessage("error",this._updateEmailAbortController.signal);t===F.CaptchaChallenge?e(void 0):i()}catch(e){t(e)}}));i()}));yield Promise.race([o,a]),yield null===(s=this._view)||void 0===s?void 0:s.openAuthorizeModal(),this._updateEmailAbortController.abort()}catch(e){if(e instanceof Re)return;e instanceof Error&&p.notify(new Error(`Error updating user info: ${e.name} - ${e.message}`))}}}))}_updateSrc(e){var t,i,n;const s=null===(t=this._view)||void 0===t?void 0:t.getIframe();if(!s&&"redirect"!==(null===(i=this._view)||void 0===i?void 0:i.getUxMode()))return;const o=this._buildAuthorizeUrl();null===(n=this._view)||void 0===n||n.setAuthorizeUrl(o),s&&o&&(this._updateListeners(s),this._iframeSrcTimeout&&clearTimeout(this._iframeSrcTimeout),this._iframeSrcTimeout=setTimeout((()=>{h(this,qt,"m",ri).call(this),Ke(s,o,e),p.leaveBreadcrumb("Iframe url updated",{authorizeUrl:o},"state")}),0))}_buildAuthorizeUrl(){var e;const t={clientId:h(this,Rt,"f"),responseType:this._responseType,responseMode:this._responseMode,redirectType:h(this,Yt,"f"),redirectUri:h(this,Jt,"f"),codeChallenge:this._codeChallenge,codeChallengeMethod:this._codeChallengeMethod,state:this._state,scope:this._scope},i=null===(e=this._view)||void 0===e?void 0:e.isModalCustomized();return It(Object.assign(Object.assign({version:h(this,Kt,"f"),analyticsTraceId:h(this,Ht,"f"),analyticsContext:this._analyticsContext,isCompactLayout:this._isCompactLayout,flow:this._flow,flowVersion:this._flowVersion,signUpEnabled:!this._disableSignUp,oauthParams:t,avoidPayAltDomain:this._avoidPayAltDomain,avoidSdkSession:this._avoidSdkSession,hideCopy:this._hidePayCopy},i&&{modalCustomized:i}),{apiKey:this._apiKey,popupWindowParams:{popUpName:h(this,Zt,"f"),popUpFeatures:h(this,ei,"f")},consentChallenge:this._consentChallenge,checkoutRedirectUrl:this._checkoutRedirectUrl,checkoutVersion:this._checkoutVersion,checkoutToken:this._checkoutToken,transactionParams:this._transactionParams,shopId:this._shopId,requireVerification:this._requireVerification,uxMode:h(this,Xt,"f"),error:this._error}))}_updateListeners(e){this._iframeListener&&(this._iframeListener.eventSource=new je(e)),this._iframeMessenger&&(this._iframeMessenger.eventDestination=e)}_updateMonorailTracker(){var e;c(this,Qt,new xt({elementName:"shop-login-default",analyticsTraceId:h(this,Ht,"f"),analyticsContext:this._analyticsContext,flowVersion:this._flowVersion,shopId:Ge(this._shopId),shopPermanentDomain:this._shopPermanentDomain,checkoutVersion:this._checkoutVersion,checkoutToken:this._checkoutToken}),"f"),null===(e=this._view)||void 0===e||e.setMonorailTracker(h(this,Qt,"f"))}_handleCompleted(e,t,i,n,s,o,a,r){return d(this,void 0,void 0,(function*(){var l,d;e&&s&&(yield Qe(h(this,Gt,"f"),p.notify),this.publishToHub(Ve.UserSessionCreate,{email:a||t,initial:a||(null==t?void 0:t[0])||"",avatar:r})),this._keepModalOpen||(yield null===(l=this._view)||void 0===l?void 0:l.closeAuthorizeModal()),null===(d=this._iframeListener)||void 0===d||d.destroy(),this.stopListeningToInput(),this.dispatchCustomEvent("completed",{loggedIn:e,email:t,customerAccessToken:i,customerAccessTokenExpiresAt:n,shopPayInstallmentsOnboarded:o}),this._maybeRedirect()}))}_handleCustomFlowSideEffect(e){return d(this,void 0,void 0,(function*(){if(e.flow===Te.Prequal)this.dispatchCustomEvent("prequal_flow_side_effect",{shopPayInstallmentsOnboarded:e.shopPayInstallmentsOnboarded})}))}_maybeRedirect(){if("pop_up"!==h(this,Yt,"f")&&h(this,Jt,"f"))try{let e=h(this,Jt,"f");if(h(this,Ht,"f")){const t={analytics_trace_id:h(this,Ht,"f")},i=new URLSearchParams(t);e=e.concat(`?${i.toString()}`)}else p.notify(new Error("Missing analytics trace ID when redirecting to account page"));window.location.assign(e)}catch(e){e instanceof Error&&p.notify(e)}}_handleError(e,t){this.dispatchCustomEvent("error",{message:e,code:t}),t===F.RetriableServerError&&(this._error=t,this._updateSrc(!0)),hi.includes(t)?Ye(Je.HandleSilentError,1,{component:"shop-login-default",errorCode:t}):p.notify(new Error(`Authorize Error: ${e} (${t}).`)),h(this,qt,"m",li).call(this)}_onPopUpOpened(e){var t;e.didOpen&&(null===(t=this._view)||void 0===t||t.dispatch({type:w.PopUpOpened,payload:e})),this.dispatchCustomEvent("popuploading",e)}_onLoaded(e){var t,i,n;null===(t=this._view)||void 0===t||t.setAuthenticationLevel((null==e?void 0:e.authenticationLevelRequired)||v.Phone),null===(i=this._view)||void 0===i||i.dispatch({type:w.Init,payload:e}),null===(n=this._view)||void 0===n||n.onContentLoaded()}_onUserMatched({hasName:e=!1,userCookieExists:t=!1,personalizeConsentChallenge:i=!1}){var n;null===(n=this._view)||void 0===n||n.dispatch({type:w.UserMatched,payload:{hasName:e,userCookieExists:t,personalizeConsentChallenge:i}}),Xe(),this.dispatchCustomEvent("shopusermatched")}_onUserNotMatched({apiError:e}){var t;null===(t=this._view)||void 0===t||t.dispatch({type:w.UserNotMatched}),this.dispatchCustomEvent("shopusernotmatched",{apiError:e})}_onEmailChangeRequested(){var e;null===(e=this._view)||void 0===e||e.dispatch({type:w.Restart}),this.dispatchCustomEvent("restarted")}_onVerificationStepChanged(e){var t;null===(t=this._view)||void 0===t||t.dispatch({type:w.VerificationStepChanged,payload:e})}}function ui(){q("shop-login-default",ci)}var pi,mi;Ht=new WeakMap,Rt=new WeakMap,Kt=new WeakMap,Gt=new WeakMap,Qt=new WeakMap,Yt=new WeakMap,Jt=new WeakMap,Xt=new WeakMap,Zt=new WeakMap,ei=new WeakMap,ti=new WeakMap,ii=new WeakMap,ni=new WeakMap,si=new WeakMap,oi=new WeakMap,qt=new WeakSet,ai=function(){return d(this,void 0,void 0,(function*(){var e;try{const t="de",i={follow_on_shop:{follow:"In {shop} folgen",following:"In {shop} gefolgt",auth_modal:{title:"In Shop folgen",description:"Bleibe auf dem neuesten Stand und verpasse niemals einen Sale, einen Restock oder ein Bestellupdate."},following_modal:{title:"{store} in Shop besuchen",subtitle:"Alles, was du zum Einkaufen, Verfolgen und Bezahlen brauchst – an einem zentralen Ort.",qr_header:"Scannen, um {store} in der Shop-App aufzurufen",qr_alt_text:"QR-Code für Shop-App",continue:"Fortfahren"},completed:{title:"Du folgst {store}",subtitle:"Wir haben eine E-Mail mit einem Link zum Herunterladen der Shop-App an dich gesendet."},personalization_consent:{title:"Synchronisiere deine Einkaufsaktivität, um auf Shop zu folgen"}},login_with_shop:{login:"Anmelden bei {shop}",auth_modal:{login_title:"Bei Shop anmelden",login_description:"Der einfachste und sicherste Weg, sich bei {store} anzumelden – ohne Passwort.",signup_title:"Konto erstellen",signup_description:"Gib deine Telefonnummer ein, um ein Shop-Konto zu erstellen.",login_sms_title:"Deine Identität bestätigen",login_sms_description:"Gib den Code ein, der an {phoneNumber} gesendet wurde",login_email_title:"Bestätige deine Identität",login_email_description:"Gib den Code ein, der an deine E-Mail ({email}) gesendet wurde",login_title_with_store:"Melde dich mit Shop bei {store} an",login_webauthn_title:"Bestätige deine Identität",login_webauthn_description:"Melde dich mit einem Passkey an, um deine gespeicherten Informationen sicher zu nutzen.",login_webauthn_footer:"Wenn du fortfährst, wird dein Name und deine E-Mail-Adresse mit {store} geteilt."}},customer_accounts:{remember_me:"Meine Informationen sicher bei Shop abspeichern, um überall ein schnelleres Anmelden zu ermöglichen",sign_up_page:{auth_modal:{login_title:"Mit Shop fortfahren",login_description:"Nutze dein Shop-Konto, um dich überall anzumelden – ohne Passwort.",login_sms_description:"Nutze dein Shop-Konto, um dich überall anzumelden – ohne Passwort.\r\n\r\nBestätige deine Identität, indem du den Code eingibst, der an {phoneNumber} gesendet wurde",login_email_description:"Nutze dein Shop-Konto, um dich überall anzumelden – ohne Passwort.\r\n\r\nBestätige deine Identität, indem du den Code eingibst, der an deine E-Mail-Adresse {email} gesendet wurde",login_webauthn_title:"Mit Shop fortfahren",login_webauthn_description:"Melde dich mit einem Passkey an, um deine gespeicherten Informationen sicher zu nutzen."}}},verified_email_auth:{auth_modal:{login_title:"Einloggen oder registrieren",signup_title:"Mit Shop fortfahren",signup_description:"Erstelle ein Shop-Konto, um dich bei {clientName} anzumelden – kein Passwort erforderlich"}},legal:{terms_of_service:"allgemeinen Geschäftsbedingungen",privacy_policy:"Datenschutzerklärung",terms:"allgemeinen",client:"Siehe {termsOfService} und {privacyPolicy} von {clientName}.",shop:"Indem du fortfährst, stimmst du den {termsOfService} von Shop zu und nimmst die {privacyPolicy} zur Kenntnis.",authorized_scopes:{email_name:"Wenn du fortfährst, wird dein Name und deine E-Mail-Adresse mit {store} geteilt."}},payment_request:{auth_modal:{login_title:"Checke mit Shop Pay aus",login_description:"Nutze deine gespeicherten Informationen, um sicher in {store} auszuchecken.",login_sms_title:"Deine Identität bestätigen",login_sms_description:"Gib den Code ein, der an {phoneNumber} gesendet wurde, um in aller Sicherheit deine gespeicherten Informationen zu verwenden.",login_email_title:"Bestätige deine Identität",login_email_description:"Gib den Code ein, der an deine E-Mail-Adresse {email} gesendet wurde, um in aller Sicherheit deine gespeicherten Informationen zu verwenden."}},checkout_modal:{auth_modal:{login_sms_description:"Gib den Code ein, der an {phoneNumber} gesendet wurde, um in aller Sicherheit deine gespeicherten Informationen zu verwenden.",login_email_description:"Gib den Code ein, der an deine E-Mail-Adresse {email} gesendet wurde, um in aller Sicherheit deine gespeicherten Informationen zu verwenden."}}};c(this,ti,new u({[t]:i}),"f"),null===(e=this._view)||void 0===e||e.setTranslations(h(this,ti,"f"))}catch(e){e instanceof Error&&p.notify(e)}return null}))},ri=function(){h(this,qt,"m",li).call(this),this._iframeLoadTimeout=setTimeout((()=>{const e=tt.temporarilyUnavailable;this.dispatchCustomEvent("error",{message:e.message,code:e.code}),h(this,qt,"m",li).call(this)}),Ze)},li=function(){this._iframeLoadTimeout&&(clearTimeout(this._iframeLoadTimeout),this._iframeLoadTimeout=void 0)},di=function(e){var t,i;switch(e.type){case"loaded":this._onLoaded(e);break;case"resize_iframe":if(!this._shouldListenToResizeMessage)return;null===(t=this._view)||void 0===t||t.resizeIframe(e.height,P(e.width,this._view.getIframe()));break;case"completed":this._handleCompleted(e.loggedIn,e.email,e.customerAccessToken,e.customerAccessTokenExpiresAt,e.shouldFinalizeLogin,e.shopPayInstallmentsOnboarded,e.givenNameFirstInitial,e.avatar);break;case"error":this._handleError(e.message,e.code);break;case"close_requested":null===(i=this._view)||void 0===i||i.closeAuthorizeModal();break;case"shop_user_matched":this._onUserMatched(e);break;case"pop_up_opened":this._onPopUpOpened(e);break;case"shop_user_not_matched":this._onUserNotMatched(e);break;case"email_change_requested":this._onEmailChangeRequested();break;case"verification_step_changed":this._onVerificationStepChanged(e);break;case"custom_flow_side_effect":this._handleCustomFlowSideEffect(e)}};const _i={[Te.Follow]:"shop-follow-button",[Te.Default]:"shop-login-default",[Te.Prequal]:"shop-login-default",[Te.PopUp]:"shop-login-default",[Te.CheckoutSheet]:null,[Te.Custom]:"shop-login-default"},fi={[Q]:!1,[Y]:!1,[J]:!1,[te]:"",[de]:!1,[he]:!1,[ue]:"unspecified",[pe]:"",[st]:!1,[De]:!1,[be]:!1,[xe]:!1,[ze]:"unspcified"};class gi extends it{constructor(){super(...arguments),pi.set(this,void 0),mi.set(this,void 0)}static get observedAttributes(){return[R,K,ue,G,Q,Y,J,nt,ie,X,Z,te,Z,ee,ne,se,oe,ae,re,le,pe,O,st,m,_,f,me,_e,fe,ge,be,I,we,ve,ke,ye,Se,Ce,Me,Ae,xe,de,he,De,ze]}get clientId(){return this._getAttributeValueWithDefault(R)}set clientId(e){this.updateAttribute(R,e)}set redirectUri(e){this.updateAttribute(Z,e)}get version(){return this._getAttributeValueWithDefault(K)}set version(e){this.updateAttribute(K,e)}get email(){return this._getAttributeValueWithDefault(pe)}set email(e){this.updateAttribute(pe,e)}set firstName(e){this.updateAttribute(Me,e)}set lastName(e){this.updateAttribute(Ae,e)}set popUpName(e){this.updateAttribute(_e,e)}set popUpFeatures(e){this.updateAttribute(fe,e)}connectedCallback(){var e;c(this,pi,ot(this.getAttribute(at),Te,Te.Default),"f"),c(this,mi,this._createActionButton({actionType:h(this,pi,"f"),attributes:this._getAttributeValues()}),"f"),this.shadowRoot||this.attachShadow({mode:"open"}),h(this,mi,"f")&&(this.shadowRoot.innerHTML="",null===(e=this.shadowRoot)||void 0===e||e.appendChild(h(this,mi,"f")))}disconnectedCallback(){}attributeChangedCallback(e,t,i){var n,s;const o=i||this._getAttributeValueWithDefault(e);"boolean"==typeof o?this.updateAttribute(e,o?"":void 0):this.updateAttribute(e,o||void 0),null===i?null===(n=h(this,mi,"f"))||void 0===n||n.removeAttribute(e):null===(s=h(this,mi,"f"))||void 0===s||s.setAttribute(e,i)}requestShow(e){h(this,mi,"f")&&"requestShow"in h(this,mi,"f")&&h(this,mi,"f").requestShow(e)}listenToInput(e){h(this,mi,"f")&&"listenToInput"in h(this,mi,"f")&&h(this,mi,"f").listenToInput(e)}stopListeningToInput(){h(this,mi,"f")&&"stopListeningToInput"in h(this,mi,"f")&&h(this,mi,"f").stopListeningToInput()}setPasswordManagerDetection(e){h(this,mi,"f")&&"setPasswordManagerDetection"in h(this,mi,"f")&&h(this,mi,"f").setPasswordManagerDetection(e)}dispatchCustomEvent(e,t){super.dispatchCustomEvent(e,t)}_createActionButton({actionType:e,attributes:t}){const i=_i[e];if(!i)return;const n=document.createElement(i);return n?(Object.entries(t).forEach((([e,t])=>{t&&n.setAttribute(e,String(t))})),n):void 0}_getAttributeValues(){return gi.observedAttributes.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:this._getAttributeValueWithDefault(t)})),Object.assign(Object.assign({},fi),{[ce]:this._getAttributeValueWithDefault(at)}))}_getAttributeValueWithDefault(e){switch(e){case at:case ce:return ot(this.getAttribute(at),Te,Te.Default);case Q:case Y:case J:case de:case he:case st:case De:case be:case xe:case nt:return this.getBooleanAttribute(e);case te:case pe:return this.getAttribute(e)||"";case ue:return this.getAttribute(e)||"unspecified";case I:return this.getAttribute(e)||Ee();default:return this.getAttribute(e)||void 0}}}function bi(){q("shop-login-button",gi)}pi=new WeakMap,mi=new WeakMap;class wi extends xt{constructor({elementName:e,analyticsTraceId:t,analyticsContext:i,shopId:n,shopPermanentDomain:s,checkoutToken:o,checkoutVersion:a}){super({elementName:e,analyticsTraceId:t,analyticsContext:i,shopId:n,shopPermanentDomain:s,checkoutToken:o,checkoutVersion:a})}trackModalClosed(e){const t={checkoutToken:this._checkoutToken||"",shopId:this._shopId,shopifyDomain:this._shopPermanentDomain,action:vi(e||""),checkoutVersion:this._checkoutVersion};rt({schemaId:lt.ShopifyPayPaymentPageUiInteraction,payload:t})}}function vi(e){var t;return null!==(t={closeButton:"close_sheet_x_click",overlay:"close_sheet_outside_click",keyboard:"close_sheet_keyboard_click"}[e])&&void 0!==t?t:"close_sheet_other"}class ki extends HTMLElement{constructor(){super();const e=document.createElement("template"),t=this.getAttribute("size"),i=this.getAttribute("background-color")||"#FFF";e.innerHTML=function(e=36,t){const[i,n,s]=dt(t),o=`rgb(${i}, ${n}, ${s})`,a=1.15,r=e,l=Math.round(r/a);return`\n    <style>\n      .shop-swirl {\n        height: ${r}px;\n        width: ${l}px;\n        vertical-align: middle;\n      }\n    </style>\n    <svg class="shop-swirl" viewBox="0 0 22 25" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M9.43 0C4.607 0 2.2 1.63.266 2.952L.21 2.99a.476.476 0 0 0-.146.632l1.91 3.291a.486.486 0 0 0 .327.235.5.5 0 0 0 .398-.104l.15-.127c.995-.832 2.586-1.957 6.441-2.25 2.146-.174 4.005.404 5.372 1.666 1.503 1.386 2.4 3.626 2.4 5.991 0 4.348-2.56 7.084-6.68 7.14-3.391-.02-5.67-1.788-5.67-4.404 0-1.399.651-2.306 1.884-3.216a.437.437 0 0 0 .124-.554L4.995 8.03a.493.493 0 0 0-.685-.193C2.386 8.98.03 11.067.155 15.077c.156 5.111 4.403 9.009 9.921 9.168h.63C17.268 24.034 22 19.166 22 12.576 22.01 6.474 17.6 0 9.43 0z" fill="${o}" />\n    </svg>\n  `}(t?Number.parseInt(t,10):void 0,i),this.attachShadow({mode:"open"}).appendChild(e.content.cloneNode(!0))}}var yi,Si,Ci,Mi,Ai,xi,zi,Ei,Ti,Ii,Li,Oi,Pi,Ni,Vi;const Di="shop-modal-content";class Wi extends HTMLElement{constructor(){super(),yi.add(this),Si.set(this,void 0),Ci.set(this,void 0),Mi.set(this,void 0),Ai.set(this,void 0),xi.set(this,void 0),zi.set(this,void 0),Ei.set(this,void 0),Ti.set(this,void 0),Ii.set(this,void 0),Li.set(this,void 0),Oi.set(this,{});const e=document.createElement("template");e.innerHTML=`\n    <style>\n      .${Di} {\n        border-bottom: 1px solid #D9D9D9;\n        padding-bottom: 20px;\n        text-align: center;\n        margin: 0 20px;\n      }\n\n      .${Di}--small {\n        padding-bottom: 7px;\n      }\n\n      .${Di}.hide-divider {\n        border-bottom-color: transparent;\n      }\n\n      .${Di}-title {\n        font-size: 20px;\n        font-weight: 600;\n        line-height: 25px;\n        letter-spacing: -0.2px;\n        color: #000000;\n        margin-bottom: 8px;\n      }\n\n      .${Di}-description {\n        font-size: 14px;\n        font-weight: 400;\n        color: #0F1721;\n        letter-spacing: 0px;\n      }\n\n      .${Di}-processing {\n        min-height: 97px;\n        margin: 0 20px;\n      }\n\n      .${Di}-processing-user {\n        padding: 15px 0;\n        min-height: 15px;\n        font-size: 12px;\n        color: #0F1721;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        -webkit-font-smoothing: antialiased;\n        -webkit-text-size-adjust: 100%;\n        font-family: -apple-system, BlinkMacSystemFont, San Francisco, Roboto, Segoe UI, Helvetica Neue, sans-serif !important;\n      }\n\n      .${Di}-disclaimer {\n        font-size: 12px;\n        line-height: 1.4;\n        text-align: center;\n        color: rgb(63, 69, 77);\n        padding: 8px 0 5px;\n        margin: 0 20px;\n      }\n\n      .${Di}-disclaimer a {\n        color: ${ht.brand};\n        -webkit-appearance: none;\n        appearance: none;\n        text-decoration: none;\n        cursor: pointer;\n      }\n\n      .${Di}-disclaimer a:hover,\n      .${Di}-disclaimer a:focus,\n      .${Di}-disclaimer a:active {\n        outline: none;\n        color: #7b61f0;\n      }\n\n      @media (forced-colors: active) {\n        .${Di}.hide-divider {\n          border-bottom: none;\n        }\n      }\n\n      .hidden {\n        display: none;\n      }\n    </style>\n    <div class="${Di} hidden">\n      <h2 class="${Di}-title hidden"></h2>\n      <div class="${Di}-description hidden"></div>\n    </div>\n    <div class="${Di}-content hidden">\n      <div class="${Di}-processing hidden">\n        <div class="${Di}-processing-user"></div>\n        <div class="${Di}-processing-status"></div>\n      </div>\n      <div class="${Di}-children hidden">\n        <slot></slot>\n      </div>\n      <div class="${Di}-disclaimer hidden"></div>\n    </div>\n  `,c(this,Si,this.attachShadow({mode:"open"}),"f"),h(this,Si,"f").appendChild(e.content.cloneNode(!0)),c(this,Ci,h(this,Si,"f").querySelector(`.${Di}`),"f"),c(this,Mi,h(this,Si,"f").querySelector(`.${Di}-title`),"f"),c(this,Ai,h(this,Si,"f").querySelector(`.${Di}-description`),"f"),c(this,xi,h(this,Si,"f").querySelector(`.${Di}-content`),"f"),c(this,zi,h(this,Si,"f").querySelector(`.${Di}-processing`),"f"),c(this,Ei,h(this,Si,"f").querySelector(`.${Di}-processing-user`),"f"),c(this,Ii,h(this,Si,"f").querySelector(`.${Di}-children`),"f"),c(this,Li,h(this,Si,"f").querySelector(`.${Di}-disclaimer`),"f")}hideDivider(){h(this,Ci,"f").classList.add("hide-divider")}showDivider(){h(this,Ci,"f").classList.remove("hide-divider")}update(e){c(this,Oi,Object.assign(Object.assign({},h(this,Oi,"f")),e),"f"),h(this,yi,"m",Pi).call(this),h(this,yi,"m",Ni).call(this),h(this,yi,"m",Vi).call(this)}}function $i(e,t=!1){const i=document.createElement("shop-modal-content");return t&&i.hideDivider(),i.update(e),i}Si=new WeakMap,Ci=new WeakMap,Mi=new WeakMap,Ai=new WeakMap,xi=new WeakMap,zi=new WeakMap,Ei=new WeakMap,Ti=new WeakMap,Ii=new WeakMap,Li=new WeakMap,Oi=new WeakMap,yi=new WeakSet,Pi=function(){const{title:e,description:t,authorizeState:i}=h(this,Oi,"f"),n=e||t;h(this,Ci,"f").classList.toggle("hidden",!n),h(this,Mi,"f").classList.toggle("hidden",!e),h(this,Ai,"f").classList.toggle("hidden",!t),h(this,Mi,"f").textContent=e||"",h(this,Ai,"f").textContent=t||"",i&&(h(this,Ci,"f").classList.toggle("hide-divider",i===ct.Start),h(this,Ci,"f").classList.toggle(`${Di}--small`,i===ct.Start))},Ni=function(){var e;const{authorizeState:t,status:i,email:n}=h(this,Oi,"f"),s=Boolean(t||i),o=Boolean(i&&n),a=Boolean(s&&!o);if(h(this,xi,"f").classList.toggle("hidden",!s),h(this,zi,"f").classList.toggle("hidden",!o),h(this,Ii,"f").classList.toggle("hidden",!a),!h(this,Ti,"f")&&o){const i=t===ct.OneClick?ut.Branded:ut.Regular;c(this,Ti,pt(i),"f"),h(this,zi,"f").appendChild(h(this,Ti,"f")),null===(e=h(this,Ti,"f"))||void 0===e||e.setStatus({status:"loading",message:""})}h(this,Ei,"f").textContent=n||""},Vi=function(){const{disclaimer:e}=h(this,Oi,"f"),t=Boolean(e);h(this,Li,"f").classList.toggle("hidden",!t),h(this,Li,"f").innerHTML=e||""},customElements.get("shop-modal-content")||customElements.define("shop-modal-content",Wi);const ji="following";class Bi extends HTMLElement{constructor(){super(),this._rootElement=null,this._button=null,this._wrapper=null,this._heartIcon=null,this._followSpan=null,this._followingSpan=null,this._i18n=null,this._followTextWidth=0,this._followingTextWidth=0,customElements.get("shop-logo")||customElements.define("shop-logo",l)}connectedCallback(){return d(this,void 0,void 0,(function*(){yield this._initTranslations(),this._initElements()}))}setFollowing({following:e=!0,skipAnimation:t=!1}){var i,n,s,o,a;null===(i=this._button)||void 0===i||i.classList.toggle("button--animating",!t),null===(n=this._button)||void 0===n||n.classList.toggle("button--following",e),null!==this._followSpan&&null!==this._followingSpan&&(this._followSpan.ariaHidden=e?"true":"false",this._followingSpan.ariaHidden=e?"false":"true"),this.style.setProperty("--button-width",`${e?this._followingTextWidth:this._followTextWidth}px`),window.matchMedia("(prefers-reduced-motion: reduce)").matches||t?null===(s=this._heartIcon)||void 0===s||s.setFilled(e):null===(a=null===(o=this._button)||void 0===o?void 0:o.querySelector(".follow-text"))||void 0===a||a.addEventListener("transitionend",(()=>{var t;null===(t=this._heartIcon)||void 0===t||t.setFilled(e)}))}setFocused(){var e;null===(e=this._button)||void 0===e||e.focus()}_initTranslations(){return d(this,void 0,void 0,(function*(){try{const e="de",t={follow_on_shop:{follow:"In {shop} folgen",following:"In {shop} gefolgt",auth_modal:{title:"In Shop folgen",description:"Bleibe auf dem neuesten Stand und verpasse niemals einen Sale, einen Restock oder ein Bestellupdate."},following_modal:{title:"{store} in Shop besuchen",subtitle:"Alles, was du zum Einkaufen, Verfolgen und Bezahlen brauchst – an einem zentralen Ort.",qr_header:"Scannen, um {store} in der Shop-App aufzurufen",qr_alt_text:"QR-Code für Shop-App",continue:"Fortfahren"},completed:{title:"Du folgst {store}",subtitle:"Wir haben eine E-Mail mit einem Link zum Herunterladen der Shop-App an dich gesendet."},personalization_consent:{title:"Synchronisiere deine Einkaufsaktivität, um auf Shop zu folgen"}},login_with_shop:{login:"Anmelden bei {shop}",auth_modal:{login_title:"Bei Shop anmelden",login_description:"Der einfachste und sicherste Weg, sich bei {store} anzumelden – ohne Passwort.",signup_title:"Konto erstellen",signup_description:"Gib deine Telefonnummer ein, um ein Shop-Konto zu erstellen.",login_sms_title:"Deine Identität bestätigen",login_sms_description:"Gib den Code ein, der an {phoneNumber} gesendet wurde",login_email_title:"Bestätige deine Identität",login_email_description:"Gib den Code ein, der an deine E-Mail ({email}) gesendet wurde",login_title_with_store:"Melde dich mit Shop bei {store} an",login_webauthn_title:"Bestätige deine Identität",login_webauthn_description:"Melde dich mit einem Passkey an, um deine gespeicherten Informationen sicher zu nutzen.",login_webauthn_footer:"Wenn du fortfährst, wird dein Name und deine E-Mail-Adresse mit {store} geteilt."}},customer_accounts:{remember_me:"Meine Informationen sicher bei Shop abspeichern, um überall ein schnelleres Anmelden zu ermöglichen",sign_up_page:{auth_modal:{login_title:"Mit Shop fortfahren",login_description:"Nutze dein Shop-Konto, um dich überall anzumelden – ohne Passwort.",login_sms_description:"Nutze dein Shop-Konto, um dich überall anzumelden – ohne Passwort.\r\n\r\nBestätige deine Identität, indem du den Code eingibst, der an {phoneNumber} gesendet wurde",login_email_description:"Nutze dein Shop-Konto, um dich überall anzumelden – ohne Passwort.\r\n\r\nBestätige deine Identität, indem du den Code eingibst, der an deine E-Mail-Adresse {email} gesendet wurde",login_webauthn_title:"Mit Shop fortfahren",login_webauthn_description:"Melde dich mit einem Passkey an, um deine gespeicherten Informationen sicher zu nutzen."}}},verified_email_auth:{auth_modal:{login_title:"Einloggen oder registrieren",signup_title:"Mit Shop fortfahren",signup_description:"Erstelle ein Shop-Konto, um dich bei {clientName} anzumelden – kein Passwort erforderlich"}},legal:{terms_of_service:"allgemeinen Geschäftsbedingungen",privacy_policy:"Datenschutzerklärung",terms:"allgemeinen",client:"Siehe {termsOfService} und {privacyPolicy} von {clientName}.",shop:"Indem du fortfährst, stimmst du den {termsOfService} von Shop zu und nimmst die {privacyPolicy} zur Kenntnis.",authorized_scopes:{email_name:"Wenn du fortfährst, wird dein Name und deine E-Mail-Adresse mit {store} geteilt."}},payment_request:{auth_modal:{login_title:"Checke mit Shop Pay aus",login_description:"Nutze deine gespeicherten Informationen, um sicher in {store} auszuchecken.",login_sms_title:"Deine Identität bestätigen",login_sms_description:"Gib den Code ein, der an {phoneNumber} gesendet wurde, um in aller Sicherheit deine gespeicherten Informationen zu verwenden.",login_email_title:"Bestätige deine Identität",login_email_description:"Gib den Code ein, der an deine E-Mail-Adresse {email} gesendet wurde, um in aller Sicherheit deine gespeicherten Informationen zu verwenden."}},checkout_modal:{auth_modal:{login_sms_description:"Gib den Code ein, der an {phoneNumber} gesendet wurde, um in aller Sicherheit deine gespeicherten Informationen zu verwenden.",login_email_description:"Gib den Code ein, der an deine E-Mail-Adresse {email} gesendet wurde, um in aller Sicherheit deine gespeicherten Informationen zu verwenden."}}};this._i18n=new u({[e]:t})}catch(e){e instanceof Error&&p.notify(e)}return null}))}_initElements(){var e,t,i,n;const s=document.createElement("template");if(s.innerHTML=`\n    <style>\n      @keyframes followBackground {\n        0% {\n          width: 100%;\n          height: 100%;\n          transform: scaleY(1);\n        }\n\n        25% {\n          transform: scaleY(1);\n        }\n\n        50% {\n          transform: scaleY(1.2);\n        }\n\n        100% {\n          transform: scaleY(1);\n          width: 37px;\n          height: 37px;\n        }\n      }\n\n      :host {\n        display: inline-block;\n        line-height: normal;\n\n        --following-text-color: #000000;\n        --border-color: #5433EB;\n        --border-hover-color: #7f68e9;\n        --parent-width: var(--reserved-width, 177px);\n\n        /* Reserve width to prevent layout shifts */\n        width: var(--parent-width);\n      }\n\n      .button {\n        border: none;\n        margin: 0;\n        padding: 0;\n        overflow: visible;\n        isolation: isolate;\n\n        background: transparent;\n        color: #ffffff;\n        font: 16px/19px -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica;\n\n        line-height: normal;\n\n        -webkit-font-smoothing: inherit;\n        -moz-osx-font-smoothing: inherit;\n\n        -webkit-appearance: none;\n        position: relative;\n        display: inline-block;\n        align-items: center;\n\n        height: 37px;\n        width: var(--button-width, 100%);\n        border-radius: 48px;\n      }\n\n      .button:focus,\n      .button:focus-visible {\n        outline: none;\n      }\n\n      .button--dark {\n        --following-text-color: #ffffff;\n      }\n\n      .button--bordered {\n        --border-color: #EDEDED;\n        --border-hover-color: #EDEDED;\n      }\n\n      .follow-icon-wrapper {\n        display: flex;\n        align-items: center;\n        width: auto;\n        position: relative;\n        z-index: 1;\n        top: 0;\n        left: 0;\n      }\n\n      .follow-icon-wrapper:before {\n        content: '';\n        background: #5433EB;\n        border-radius: 48px;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        position: absolute;\n        z-index: -1;\n        transform-origin: center;\n        box-sizing: border-box;\n        border: 1px solid var(--border-color);\n      }\n\n      .button:not(.button--following):focus-visible .follow-icon-wrapper:before,\n      .button:not(.button--following):hover .follow-icon-wrapper:before {\n        background: #7f68e9;\n        border-color: var(--border-hover-color);\n      }\n\n      .follow-icon-wrapper shop-heart-icon {\n        position: absolute;\n        top: 11px;\n        left: 12px;\n      }\n\n      .follow-text,\n      .following-text {\n        white-space: nowrap;\n        padding: 9px 11px 9px 35px;\n        cursor: pointer;\n      }\n\n      .follow-text shop-logo,\n      .following-text shop-logo {\n        position: relative;\n        top: 3px;\n        padding-left: 1px;\n      }\n\n      .following-text {\n        opacity: 0;\n        pointer-events: none;\n        color: var(--following-text-color);\n        padding: 9px 8px 9px 43px;\n        position: absolute;\n        top: 0;\n        left: 0;\n        box-sizing: border-box;\n        overflow: hidden;\n        max-width: var(--button-width);\n      }\n\n      .following-icon {\n        opacity: 0;\n      }\n\n      .button--following .follow-icon-wrapper:before {\n        position: absolute;\n        width: 37px;\n        height: 37px;\n        padding: 0;\n      }\n\n      .button--following:focus-visible,\n      .button--following:hover {\n        background: rgb(217 217 217 / 0.2);\n      }\n\n      .button--following .follow-text,\n      .button--following .follow-icon {\n        opacity: 0;\n      }\n\n      .button--following .following-text {\n        opacity: 1;\n        width: auto;\n        pointer-events: auto;\n      }\n\n      .button--following .following-icon {\n        opacity: 1;\n      }\n\n      .button--following .follow-icon-wrapper shop-heart-icon {\n        transform: translateX(-1.5px);\n      }\n\n      @media (prefers-reduced-motion: no-preference) {\n        .button--animating {\n          transition: 400ms width cubic-bezier(0.45, 0, 0.15, 1);\n        }\n\n        .button--animating .follow-text {\n          transition: 200ms opacity cubic-bezier(0.45, 0, 1, 1);\n        }\n\n        .button--animating .following-text {\n          transition: 200ms opacity cubic-bezier(0, 0, 0.15, 1);\n          transition-delay: 0.2s;\n        }\n\n        .button--animating.button--following .follow-icon-wrapper:before {\n          animation: followBackground 0.4s cubic-bezier(0.45, 0, 0.15, 1);\n        }\n\n        .button--animating.button--following .follow-icon-wrapper shop-heart-icon {\n          transition: 400ms transform cubic-bezier(0.45, 0, 0.15, 1);\n        }\n      }\n    </style>\n    <button class="button">\n      <span class="follow-icon-wrapper">\n        <span class="follow-text">\n          <slot name="follow-text">\n            Follow on ${Ui("white")}\n          </slot>\n        </span>\n      </span>\n\n      <span class="following-text" aria-hidden="true">\n        <slot name="following-text">\n          Following on ${Ui("black")}\n        </slot>\n      </span>\n    </button>\n  `,this._rootElement=this.attachShadow({mode:"open"}),this._rootElement.appendChild(s.content.cloneNode(!0)),this._i18n){const e=this._i18n.translate("follow_on_shop.follow",{shop:Ui("white")}),t=this._i18n.translate("follow_on_shop.following",{shop:Ui("black")});this._rootElement.querySelector('slot[name="follow-text"]').innerHTML=e,this._rootElement.querySelector('slot[name="following-text"]').innerHTML=t}this._button=this._rootElement.querySelector(".button"),this._wrapper=this._button.querySelector(".follow-icon-wrapper"),this._followSpan=null===(e=this._rootElement)||void 0===e?void 0:e.querySelector("span.follow-text"),this._followingSpan=null===(t=this._rootElement)||void 0===t?void 0:t.querySelector("span.following-text"),this._heartIcon=mt(),this._wrapper.prepend(this._heartIcon),this._followTextWidth=(null===(i=this._rootElement.querySelector(".follow-text"))||void 0===i?void 0:i.scrollWidth)||0,this._followingTextWidth=(null===(n=this._rootElement.querySelector(".following-text"))||void 0===n?void 0:n.scrollWidth)||0,this.style.setProperty("--reserved-width",`${Math.max(this._followTextWidth,this._followingTextWidth)}px`),this.setFollowing({following:this.hasAttribute(ji),skipAnimation:!0}),this._setButtonStyle()}_setButtonStyle(){var e,t;const i=_t(this),n=ft(i,"#ffffff")>ft(i,"#000000"),s=ft(i,"#5433EB")<=3.06;if(null===(e=this._button)||void 0===e||e.classList.toggle("button--dark",n),null===(t=this._button)||void 0===t||t.classList.toggle("button--bordered",s),n&&this._i18n){const e=this._i18n.translate("follow_on_shop.following",{shop:Ui("white")});this._rootElement.querySelector('slot[name="following-text"]').innerHTML=e}}}function Ui(e){return`<shop-logo role="img" color=${e} size="15" style="display: inline-flex;" aria-label="Shop"></shop-logo>`}var Fi,qi,Hi,Ri,Ki,Gi,Qi,Yi,Ji,Xi;customElements.get("follow-on-shop-button")||customElements.define("follow-on-shop-button",Bi);const Zi="store-logo";class en extends HTMLElement{constructor(){super(),Fi.add(this),qi.set(this,void 0),Hi.set(this,void 0),Ri.set(this,void 0),Ki.set(this,void 0),Gi.set(this,void 0),Qi.set(this,void 0),Yi.set(this,""),Ji.set(this,"");const e=document.createElement("template");e.innerHTML=`\n    <style>\n      @keyframes heartBeat {\n        0% {\n          transform: scale(1);\n        }\n\n        25% {\n          transform: scale(1.12);\n        }\n\n        50% {\n          transform: scale(0.9);\n        }\n\n        70% {\n          transform: scale(1);\n        }\n      }\n\n      :host {\n        display: flex;\n        justify-content: center;\n        font-family: -apple-system,San Francisco,Roboto,Segoe UI,Helvetica Neue,sans-serif !important;\n      }\n\n      .${Zi} {\n        display: inline-block;\n        position: relative;\n      }\n\n      .${Zi}-logo-wrapper {\n        width: 58px;\n        height: 58px;\n        border-radius: 100%;\n        background: linear-gradient(0deg, rgba(0, 0, 0, 0.04), rgba(0, 0, 0, 0.04)), #FFFFFF;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        position: relative;\n        overflow: hidden;\n        box-sizing: border-box;\n      }\n\n      .${Zi}-logo-wrapper--text {\n        background: ${ht.foregroundSecondary};\n      }\n\n      .${Zi}-logo-wrapper--text img,\n      .${Zi}-logo-wrapper--image span {\n        display: none;\n      }\n\n      .${Zi}-logo-wrapper--text span,\n      .${Zi}-logo-wrapper--image img {\n        display: block;\n      }\n\n      .${Zi}-logo-wrapper img {\n        max-width: 100%;\n        max-height: 100%;\n        object-fit: contain;\n      }\n\n      .${Zi}-icon-wrapper {\n        position: absolute;\n        top: -16px;\n        left: 28px;\n        width: 36px;\n        height: 36px;\n        border-radius: 100%;\n        background: rgba(40, 40, 40, 0.3);\n        /* Note: backdrop-filter has minimal browser support */\n        -webkit-backdrop-filter: blur(24px);\n        backdrop-filter: blur(24px);\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        box-sizing: border-box;\n      }\n\n      .${Zi}-text {\n        font-size: 28px;\n        line-height: 32px;\n        font-weight: 500;\n        color: ${ht.white};\n        text-transform: capitalize;\n      }\n\n      .${Zi}--favorited .${Zi}-icon-wrapper {\n        background: ${ht.brand};\n      }\n\n      @media (forced-colors: active) {\n        .${Zi}-logo-wrapper--text,\n        .${Zi}-icon-wrapper {\n          border: 1px solid;\n        }\n      }\n\n      @media (prefers-reduced-motion: no-preference) {\n        .${Zi}-icon-wrapper {\n          transition: background 0.1s 0.75s cubic-bezier(0.45, 0, 0.15, 1);\n        }\n\n        .${Zi}--favorited shop-heart-icon {\n          transform-origin: center;\n          animation: 0.4s cubic-bezier(0.45, 0, 0.15, 1) 0.75s heartBeat;\n        }\n      }\n    </style>\n    <div class="${Zi}">\n      <div class="${Zi}-logo-wrapper">\n        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z/C/HgAGgwJ/lK3Q6wAAAABJRU5ErkJggg==" alt="" class="${Zi}-image">\n        <span class="${Zi}-text"></span>\n      </div>\n      <div class="${Zi}-icon-wrapper"></div>\n    </div>\n  `,c(this,qi,this.attachShadow({mode:"open"}),"f"),h(this,qi,"f").appendChild(e.content.cloneNode(!0)),c(this,Hi,h(this,qi,"f").querySelector(`.${Zi}`),"f"),c(this,Ri,h(this,qi,"f").querySelector(`.${Zi}-logo-wrapper`),"f"),c(this,Ki,h(this,Ri,"f").querySelector("img"),"f"),c(this,Gi,h(this,Ri,"f").querySelector("span"),"f"),c(this,Qi,mt(),"f"),h(this,qi,"f").querySelector(`.${Zi}-icon-wrapper`).append(h(this,Qi,"f"))}update({name:e,logoSrc:t}){c(this,Yi,e||h(this,Yi,"f"),"f"),c(this,Ji,t||h(this,Ji,"f"),"f"),h(this,Fi,"m",Xi).call(this)}connectedCallback(){h(this,Ki,"f").addEventListener("error",(()=>{c(this,Ji,"","f"),h(this,Fi,"m",Xi).call(this)}))}setFavorited(){return h(this,Hi,"f").classList.add(`${Zi}--favorited`),window.matchMedia("(prefers-reduced-motion: reduce)").matches?(h(this,Qi,"f").setFilled(),Promise.resolve()):new Promise((e=>{h(this,Qi,"f").addEventListener("animationstart",(()=>{h(this,Qi,"f").setFilled()})),h(this,Qi,"f").addEventListener("animationend",(()=>{setTimeout(e,1e3)}))}))}}var tn,nn,sn,on,an,rn,ln,dn,hn,cn,un,pn,mn,_n,fn,gn,bn,wn,vn,kn,yn,Sn,Cn,Mn,An,xn,zn,En,Tn,In,Ln,On,Pn,Nn,Vn,Dn,Wn,$n,jn,Bn,Un,Fn,qn,Hn,Rn,Kn,Gn,Qn,Yn,Jn,Xn;qi=new WeakMap,Hi=new WeakMap,Ri=new WeakMap,Ki=new WeakMap,Gi=new WeakMap,Qi=new WeakMap,Yi=new WeakMap,Ji=new WeakMap,Fi=new WeakSet,Xi=function(){const e=h(this,Yi,"f"),t=h(this,Ki,"f").src;h(this,Gi,"f").textContent=e.charAt(0),h(this,Gi,"f").ariaLabel=e,h(this,Ji,"f")&&h(this,Ji,"f")!==t?(h(this,Ki,"f").src=h(this,Ji,"f"),h(this,Ki,"f").alt=e,h(this,Ri,"f").classList.remove(`${Zi}-logo-wrapper--text`),h(this,Ri,"f").classList.add(`${Zi}-logo-wrapper--image`)):h(this,Ji,"f")||(h(this,Ri,"f").classList.remove(`${Zi}-logo-wrapper--image`),h(this,Ri,"f").classList.add(`${Zi}-logo-wrapper--text`))},customElements.get(Zi)||customElements.define(Zi,en),function(e){e.Closed="closed",e.Mounting="mounting",e.Open="open"}(Xn||(Xn={}));class Zn extends H{static get observedAttributes(){return[R,K,G,st]}constructor(){super(),tn.add(this),nn.set(this,void 0),sn.set(this,Ee()),on.set(this,""),an.set(this,"2"),rn.set(this,window.location.origin),ln.set(this,!1),dn.set(this,new At({elementName:"shop-follow-button",analyticsTraceId:h(this,sn,"f")})),hn.set(this,void 0),cn.set(this,void 0),un.set(this,!1),pn.set(this,null),mn.set(this,void 0),_n.set(this,void 0),fn.set(this,void 0),gn.set(this,void 0),bn.set(this,void 0),wn.set(this,void 0),vn.set(this,void 0),kn.set(this,void 0),yn.set(this,void 0),Sn.set(this,Xn.Closed),Cn.set(this,void 0),Mn.set(this,void 0),An.set(this,void 0),xn.set(this,new gt("following",!1)),zn.set(this,null),En.set(this,""),Tn.set(this,(()=>{h(this,tn,"m",jn).call(this,!0)})),c(this,nn,this.attachShadow({mode:"open"}),"f"),c(this,un,h(this,xn,"f").value,"f")}attributeChangedCallback(e,t,i){switch(e){case K:c(this,an,i,"f"),h(this,tn,"m",jn).call(this);break;case R:c(this,on,i,"f"),h(this,tn,"m",jn).call(this);break;case G:c(this,rn,i,"f"),Ne(h(this,rn,"f"));break;case st:c(this,ln,"true"===i,"f"),h(this,tn,"m",jn).call(this)}}connectedCallback(){return d(this,void 0,void 0,(function*(){this.subscribeToHub(Ve.UserStatusIdentity,h(this,Tn,"f")),yield h(this,tn,"m",In).call(this),h(this,tn,"m",Ln).call(this),h(this,tn,"m",On).call(this)}))}disconnectedCallback(){var e,t,i,n;this.unsubscribeAllFromHub(),null===(e=h(this,_n,"f"))||void 0===e||e.destroy(),null===(t=h(this,hn,"f"))||void 0===t||t.disconnect(),null===(i=h(this,bn,"f"))||void 0===i||i.destroy(),null===(n=h(this,wn,"f"))||void 0===n||n.destroy()}}nn=new WeakMap,sn=new WeakMap,on=new WeakMap,an=new WeakMap,rn=new WeakMap,ln=new WeakMap,dn=new WeakMap,hn=new WeakMap,cn=new WeakMap,un=new WeakMap,pn=new WeakMap,mn=new WeakMap,_n=new WeakMap,fn=new WeakMap,gn=new WeakMap,bn=new WeakMap,wn=new WeakMap,vn=new WeakMap,kn=new WeakMap,yn=new WeakMap,Sn=new WeakMap,Cn=new WeakMap,Mn=new WeakMap,An=new WeakMap,xn=new WeakMap,zn=new WeakMap,En=new WeakMap,Tn=new WeakMap,tn=new WeakSet,In=function(){return d(this,void 0,void 0,(function*(){try{const e="de",t={follow_on_shop:{follow:"In {shop} folgen",following:"In {shop} gefolgt",auth_modal:{title:"In Shop folgen",description:"Bleibe auf dem neuesten Stand und verpasse niemals einen Sale, einen Restock oder ein Bestellupdate."},following_modal:{title:"{store} in Shop besuchen",subtitle:"Alles, was du zum Einkaufen, Verfolgen und Bezahlen brauchst – an einem zentralen Ort.",qr_header:"Scannen, um {store} in der Shop-App aufzurufen",qr_alt_text:"QR-Code für Shop-App",continue:"Fortfahren"},completed:{title:"Du folgst {store}",subtitle:"Wir haben eine E-Mail mit einem Link zum Herunterladen der Shop-App an dich gesendet."},personalization_consent:{title:"Synchronisiere deine Einkaufsaktivität, um auf Shop zu folgen"}},login_with_shop:{login:"Anmelden bei {shop}",auth_modal:{login_title:"Bei Shop anmelden",login_description:"Der einfachste und sicherste Weg, sich bei {store} anzumelden – ohne Passwort.",signup_title:"Konto erstellen",signup_description:"Gib deine Telefonnummer ein, um ein Shop-Konto zu erstellen.",login_sms_title:"Deine Identität bestätigen",login_sms_description:"Gib den Code ein, der an {phoneNumber} gesendet wurde",login_email_title:"Bestätige deine Identität",login_email_description:"Gib den Code ein, der an deine E-Mail ({email}) gesendet wurde",login_title_with_store:"Melde dich mit Shop bei {store} an",login_webauthn_title:"Bestätige deine Identität",login_webauthn_description:"Melde dich mit einem Passkey an, um deine gespeicherten Informationen sicher zu nutzen.",login_webauthn_footer:"Wenn du fortfährst, wird dein Name und deine E-Mail-Adresse mit {store} geteilt."}},customer_accounts:{remember_me:"Meine Informationen sicher bei Shop abspeichern, um überall ein schnelleres Anmelden zu ermöglichen",sign_up_page:{auth_modal:{login_title:"Mit Shop fortfahren",login_description:"Nutze dein Shop-Konto, um dich überall anzumelden – ohne Passwort.",login_sms_description:"Nutze dein Shop-Konto, um dich überall anzumelden – ohne Passwort.\r\n\r\nBestätige deine Identität, indem du den Code eingibst, der an {phoneNumber} gesendet wurde",login_email_description:"Nutze dein Shop-Konto, um dich überall anzumelden – ohne Passwort.\r\n\r\nBestätige deine Identität, indem du den Code eingibst, der an deine E-Mail-Adresse {email} gesendet wurde",login_webauthn_title:"Mit Shop fortfahren",login_webauthn_description:"Melde dich mit einem Passkey an, um deine gespeicherten Informationen sicher zu nutzen."}}},verified_email_auth:{auth_modal:{login_title:"Einloggen oder registrieren",signup_title:"Mit Shop fortfahren",signup_description:"Erstelle ein Shop-Konto, um dich bei {clientName} anzumelden – kein Passwort erforderlich"}},legal:{terms_of_service:"allgemeinen Geschäftsbedingungen",privacy_policy:"Datenschutzerklärung",terms:"allgemeinen",client:"Siehe {termsOfService} und {privacyPolicy} von {clientName}.",shop:"Indem du fortfährst, stimmst du den {termsOfService} von Shop zu und nimmst die {privacyPolicy} zur Kenntnis.",authorized_scopes:{email_name:"Wenn du fortfährst, wird dein Name und deine E-Mail-Adresse mit {store} geteilt."}},payment_request:{auth_modal:{login_title:"Checke mit Shop Pay aus",login_description:"Nutze deine gespeicherten Informationen, um sicher in {store} auszuchecken.",login_sms_title:"Deine Identität bestätigen",login_sms_description:"Gib den Code ein, der an {phoneNumber} gesendet wurde, um in aller Sicherheit deine gespeicherten Informationen zu verwenden.",login_email_title:"Bestätige deine Identität",login_email_description:"Gib den Code ein, der an deine E-Mail-Adresse {email} gesendet wurde, um in aller Sicherheit deine gespeicherten Informationen zu verwenden."}},checkout_modal:{auth_modal:{login_sms_description:"Gib den Code ein, der an {phoneNumber} gesendet wurde, um in aller Sicherheit deine gespeicherten Informationen zu verwenden.",login_email_description:"Gib den Code ein, der an deine E-Mail-Adresse {email} gesendet wurde, um in aller Sicherheit deine gespeicherten Informationen zu verwenden."}}};c(this,zn,new u({[e]:t}),"f")}catch(e){e instanceof Error&&p.notify(e)}return null}))},Ln=function(){c(this,cn,function(e){const t=document.createElement("follow-on-shop-button");return e&&t.setAttribute(ji,""),t}(h(this,un,"f")),"f"),h(this,nn,"f").innerHTML=bt,h(this,nn,"f").appendChild(h(this,cn,"f"))},On=function(){var e;h(this,tn,"m",Fn).call(this,h(this,un,"f")),h(this,tn,"m",qn).call(this),Ne(h(this,rn,"f")),null===(e=h(this,cn,"f"))||void 0===e||e.addEventListener("click",(()=>{var e;if(h(this,ln,"f"))return c(this,un,!h(this,un,"f"),"f"),void(null===(e=h(this,cn,"f"))||void 0===e||e.setFollowing({following:h(this,un,"f")}));h(this,un,"f")?(h(this,dn,"f").trackFollowingGetAppButtonPageImpression(),wt()?h(this,tn,"m",Nn).call(this):h(this,tn,"m",$n).call(this)):(h(this,dn,"f").trackFollowButtonClicked(),h(this,tn,"m",Pn).call(this))}))},Pn=function(){h(this,vn,"f")?h(this,tn,"m",Qn).call(this):(c(this,kn,h(this,tn,"m",Vn).call(this),"f"),c(this,yn,$i({}),"f"),h(this,yn,"f").append(h(this,tn,"m",Dn).call(this)),c(this,bn,k().withInnerHTML(bt).build(),"f"),h(this,bn,"f").setNametagSuffix("follow"),c(this,vn,h(this,bn,"f").sheetModal,"f"),h(this,vn,"f").setAttribute(I,h(this,sn,"f")),h(this,vn,"f").appendChild(h(this,kn,"f")),h(this,vn,"f").appendChild(h(this,yn,"f")),h(this,vn,"f").addEventListener("modalcloserequest",h(this,tn,"m",Yn).bind(this)),h(this,vn,"f").setMonorailTracker(h(this,dn,"f")),c(this,Sn,Xn.Mounting,"f"))},Nn=function(){return d(this,void 0,void 0,(function*(){var e,t,i;if(!h(this,Cn,"f")){c(this,wn,k().withInnerHTML(bt).build(),"f"),h(this,wn,"f").setNametagSuffix("followed"),c(this,Cn,h(this,wn,"f").sheetModal,"f"),h(this,Cn,"f").setMonorailTracker(h(this,dn,"f")),h(this,Cn,"f").setAttribute("disable-popup","true");const n=yield h(this,tn,"m",Hn).call(this),s=null!==(e=null==n?void 0:n.name)&&void 0!==e?e:"the store",o=null===(t=h(this,zn,"f"))||void 0===t?void 0:t.translate("follow_on_shop.following_modal.title",{store:s}),a=null===(i=h(this,zn,"f"))||void 0===i?void 0:i.translate("follow_on_shop.following_modal.subtitle");c(this,Mn,$i({title:o,description:a},!0),"f"),h(this,Cn,"f").appendChild(h(this,Mn,"f")),h(this,Cn,"f").appendChild(yield h(this,tn,"m",Wn).call(this)),h(this,Cn,"f").addEventListener("modalcloserequest",(()=>d(this,void 0,void 0,(function*(){var e;h(this,Cn,"f")&&(yield h(this,Cn,"f").close()),null===(e=h(this,cn,"f"))||void 0===e||e.setFocused()})))),o&&h(this,Cn,"f").setAttribute("title",o)}h(this,Cn,"f").open(),h(this,dn,"f").trackFollowingGetAppButtonPageImpression()}))},Vn=function(){const e=document.createElement(Zi);return h(this,tn,"m",Hn).call(this).then((t=>{e.update({name:(null==t?void 0:t.name)||"",logoSrc:(null==t?void 0:t.id)?`${vt}/shops/${t.id}/logo?width=58`:""})})).catch((()=>{})),e},Dn=function(){var e;c(this,mn,document.createElement("iframe"),"f"),h(this,mn,"f").tabIndex=0,h(this,tn,"m",jn).call(this);const t=(null===(e=this.ownerDocument)||void 0===e?void 0:e.defaultView)||void 0;return c(this,_n,new $e(new je(h(this,mn,"f")),[r,Be,h(this,rn,"f")],h(this,tn,"m",Jn).bind(this),t),"f"),c(this,fn,new Ue(h(this,mn,"f")),"f"),T(h(this,mn,"f"),"allow","publickey-credentials-get *"),h(this,mn,"f")},Wn=function(){return d(this,void 0,void 0,(function*(){var e,t;const i=document.createElement("div"),n=yield h(this,tn,"m",Hn).call(this),s=null==n?void 0:n.id,o=null!==(t=null===(e=h(this,zn,"f"))||void 0===e?void 0:e.translate("follow_on_shop.following_modal.continue",{defaultValue:"Continue"}))&&void 0!==t?t:"",a=s?`https://shop.app/sid/${s}`:"#";return i.innerHTML=kt(a,o),i.addEventListener("click",(()=>d(this,void 0,void 0,(function*(){var e;h(this,dn,"f").trackFollowingGetAppButtonClicked(),null===(e=h(this,Cn,"f"))||void 0===e||e.close()})))),i}))},$n=function(){return d(this,void 0,void 0,(function*(){var e,t,i,n,s,o,a;if(!h(this,An,"f")){c(this,An,document.createElement("div"),"f"),h(this,An,"f").classList.add("fos-tooltip","fos-tooltip-hidden");const r=yield h(this,tn,"m",Hn).call(this),l=null!==(e=null==r?void 0:r.name)&&void 0!==e?e:"the store",d=null!==(i=null===(t=h(this,zn,"f"))||void 0===t?void 0:t.translate("follow_on_shop.following_modal.qr_header",{store:l}))&&void 0!==i?i:"",u=null!==(s=null===(n=h(this,zn,"f"))||void 0===n?void 0:n.translate("follow_on_shop.following_modal.qr_alt_text"))&&void 0!==s?s:"",p=null==r?void 0:r.id,m=p?`${vt}/qr/sid/${p}`:"#";h(this,An,"f").innerHTML=yt(d,m,u),null===(o=h(this,An,"f").querySelector(".fos-tooltip-overlay"))||void 0===o||o.addEventListener("click",(()=>{var e;null===(e=h(this,An,"f"))||void 0===e||e.classList.toggle("fos-tooltip-hidden",!0)})),null===(a=h(this,An,"f"))||void 0===a||a.addEventListener("click",(()=>{var e;null===(e=h(this,An,"f"))||void 0===e||e.classList.toggle("fos-tooltip-hidden",!0)})),h(this,nn,"f").appendChild(h(this,An,"f"))}h(this,An,"f").classList.toggle("fos-tooltip-hidden",!1)}))},jn=function(e){if(h(this,mn,"f")){const t={clientId:h(this,on,"f"),responseType:"code"},i=It({version:h(this,an,"f"),analyticsTraceId:h(this,sn,"f"),flow:Te.Follow,error:h(this,En,"f"),oauthParams:t});h(this,tn,"m",Bn).call(this),T(h(this,mn,"f"),"src",i,e),p.leaveBreadcrumb("Iframe url updated",{authorizeUrl:i},"state")}},Bn=function(){h(this,tn,"m",Un).call(this),c(this,gn,setTimeout((()=>{const e=tt.temporarilyUnavailable;this.dispatchCustomEvent("error",{message:e.message,code:e.code}),h(this,tn,"m",Un).call(this)}),Ze),"f")},Un=function(){h(this,gn,"f")&&(clearTimeout(h(this,gn,"f")),c(this,gn,void 0,"f"))},Fn=function(e){h(this,dn,"f").trackFollowButtonPageImpression(e)},qn=function(){c(this,hn,new IntersectionObserver((e=>{var t;for(const{isIntersecting:i}of e)i&&(null===(t=h(this,hn,"f"))||void 0===t||t.disconnect(),h(this,dn,"f").trackFollowButtonInViewport())})),"f"),h(this,hn,"f").observe(h(this,cn,"f"))},Hn=function(){return d(this,void 0,void 0,(function*(){return h(this,pn,"f")||c(this,pn,yield St(h(this,rn,"f")),"f"),h(this,pn,"f")}))},Rn=function(e){return d(this,arguments,void 0,(function*({loggedIn:e,shouldFinalizeLogin:t,email:i,givenNameFirstInitial:n,avatar:s}){var o,a,r,l;h(this,xn,"f").set(!0),e&&t&&(Qe(h(this,rn,"f"),(e=>{p.notify(new Error(e))})),this.publishToHub(Ve.UserSessionCreate,{email:n||i,initial:n||(null==i?void 0:i[0])||"",avatar:s})),this.dispatchCustomEvent("completed",{loggedIn:e,email:i}),yield null===(o=h(this,kn,"f"))||void 0===o?void 0:o.setFavorited(),yield null===(a=h(this,vn,"f"))||void 0===a?void 0:a.close(),null===(r=h(this,_n,"f"))||void 0===r||r.destroy(),null===(l=h(this,cn,"f"))||void 0===l||l.setFollowing({following:!0}),c(this,un,!0,"f"),h(this,tn,"m",Fn).call(this,!0)}))},Kn=function(e,t,i){var n;h(this,tn,"m",Un).call(this),e===F.RetriableServerError&&(null===(n=h(this,yn,"f"))||void 0===n||n.update({status:void 0}),c(this,En,e,"f"),h(this,tn,"m",jn).call(this,!0)),this.dispatchCustomEvent("error",{code:e,message:t,email:i})},Gn=function(e){return d(this,arguments,void 0,(function*({clientName:e,logoSrc:t}){(e||t)&&h(this,kn,"f").update({name:e,logoSrc:t}),h(this,dn,"f").trackShopPayModalStateChange({currentState:Fe.Loaded}),h(this,Sn,"f")===Xn.Mounting&&(h(this,tn,"m",Qn).call(this),c(this,Sn,Xn.Open,"f"),h(this,tn,"m",Un).call(this))}))},Qn=function(){return d(this,void 0,void 0,(function*(){var e;(yield h(this,vn,"f").open())&&(null===(e=h(this,fn,"f"))||void 0===e||e.postMessage({type:"sheetmodalopened"}))}))},Yn=function(){return d(this,void 0,void 0,(function*(){var e,t;if(h(this,vn,"f")){(yield h(this,vn,"f").close())&&(null===(e=h(this,fn,"f"))||void 0===e||e.postMessage({type:"sheetmodalclosed"}),Ie())}null===(t=h(this,cn,"f"))||void 0===t||t.setFocused()}))},Jn=function(e){var t,i,n,s;switch(e.type){case"loaded":h(this,tn,"m",Gn).call(this,e);break;case"resize_iframe":h(this,mn,"f").style.height=`${e.height}px`,h(this,mn,"f").style.width=`${P(e.width,h(this,mn,"f"))}px`;break;case"completed":h(this,tn,"m",Rn).call(this,e);break;case"error":h(this,tn,"m",Kn).call(this,e.code,e.message,e.email);break;case"content":null===(t=h(this,vn,"f"))||void 0===t||t.setAttribute("title",e.title),null===(i=h(this,yn,"f"))||void 0===i||i.update(e),null===(n=h(this,kn,"f"))||void 0===n||n.classList.toggle("hidden",e.authorizeState===ct.Captcha);break;case"processing_status_updated":null===(s=h(this,yn,"f"))||void 0===s||s.update(e);break;case"close_requested":h(this,tn,"m",Yn).call(this)}},Ct()&&(Mt({bundle:"loginButton",bundleLocale:"de"}),bi(),q("shop-follow-button",Zn),ui(),q("shop-swirl",ki));export{zt as C,Ut as L,wi as S,gi as a,It as b,ui as c,bi as d,Tt as g};
//# sourceMappingURL=client.login-button_CXurHVuy.de.esm.js.map
